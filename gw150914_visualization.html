<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GW150914 ‚Äî Substrate Fingerprint</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #0a0a1a; --card: #111128; --card-border: #1a1a3a;
  --text: #e0e0f0; --text-dim: #8888aa;
  --accent1: #6366f1; --accent2: #a855f7; --accent3: #ec4899;
  --green: #22c55e; --orange: #f59e0b;
}
body { font-family: 'JetBrains Mono', monospace; background: var(--bg); color: var(--text); padding: 20px; }
h1 { font-size: 1.8rem; text-align: center; margin-bottom: 4px;
  background: linear-gradient(135deg, var(--accent1), var(--accent2), var(--accent3));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
.sub { text-align: center; color: var(--text-dim); font-size: 0.85rem; margin-bottom: 24px; }
.card { background: var(--card); border: 1px solid var(--card-border); border-radius: 12px; padding: 20px; margin-bottom: 16px; }
.card h2 { font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
canvas { width: 100%; border-radius: 8px; background: #0d0d24; }
.stats { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin: 16px 0; }
.stat { background: #0d0d24; border: 1px solid var(--card-border); border-radius: 8px; padding: 12px; text-align: center; }
.stat-val { font-size: 1.6rem; font-weight: 700; }
.stat-label { font-size: 0.72rem; color: var(--text-dim); margin-top: 4px; }
.legend { display: flex; gap: 20px; flex-wrap: wrap; margin: 10px 0; font-size: 0.78rem; }
.legend-item { display: flex; align-items: center; gap: 6px; }
.legend-dot { width: 12px; height: 12px; border-radius: 3px; }
.controls { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; margin: 10px 0; }
.controls label { font-size: 0.78rem; color: var(--text-dim); }
.controls select, .controls button {
  background: var(--card); border: 1px solid var(--card-border); color: var(--text);
  font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;
  padding: 4px 10px; border-radius: 6px; cursor: pointer;
}
.controls button:hover { border-color: var(--accent1); }
.controls button.active { background: rgba(99,102,241,0.2); border-color: var(--accent1); }
.phase-bar { display: flex; height: 24px; border-radius: 6px; overflow: hidden; margin: 12px 0; font-size: 0.65rem; }
.phase-bar div { display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 500; }
.note { font-size: 0.78rem; color: var(--text-dim); line-height: 1.6; margin-top: 12px; }
.note strong { color: var(--text); }
.fingerprint { 
  background: linear-gradient(135deg, rgba(236,72,153,0.1), rgba(168,85,247,0.08));
  border: 1px solid rgba(236,72,153,0.3); border-radius: 10px;
  padding: 16px 20px; margin: 16px 0; text-align: center;
}
.fingerprint .big { font-size: 2.4rem; font-weight: 700; color: var(--accent3); }
.fingerprint .desc { font-size: 0.8rem; color: var(--text-dim); margin-top: 4px; }
</style>
</head>
<body>

<h1>GW150914 ‚Äî Dark Substrate Fingerprint</h1>
<div class="sub">Real LIGO data ¬∑ First gravitational wave detection ¬∑ September 14, 2015</div>

<!-- Stats -->
<div class="stats">
  <div class="stat"><div class="stat-val" style="color:var(--accent1);">36+29</div><div class="stat-label">Solar masses (M‚òâ)</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--accent2);">410</div><div class="stat-label">Megaparsecs away</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--accent3);">21.4%</div><div class="stat-label">Substrate fingerprint at merger</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--green);">192</div><div class="stat-label">km Schwarzschild radius</div></div>
</div>

<!-- Main waveform -->
<div class="card">
  <h2>üì° Strain Waveform ‚Äî LIGO H1 Detector</h2>
  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:var(--accent1);"></div> Observed (LIGO data)</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--accent3);"></div> Œ∂-predicted (substrate)</div>
    <div class="legend-item"><div class="legend-dot" style="background:rgba(255,255,255,0.15);"></div> Difference (fingerprint)</div>
  </div>
  <div class="controls">
    <label>View:</label>
    <button id="btn-full" class="active" onclick="setView('full')">Full Event</button>
    <button id="btn-merger" onclick="setView('merger')">Merger Zoom</button>
    <button id="btn-late" onclick="setView('late')">Late Inspiral</button>
    <label style="margin-left:12px;">Show:</label>
    <button id="btn-observed" class="active" onclick="toggleLine('observed')">Observed</button>
    <button id="btn-zeta" class="active" onclick="toggleLine('zeta')">Œ∂-predicted</button>
    <button id="btn-diff" onclick="toggleLine('diff')">Difference</button>
  </div>
  <canvas id="waveform" height="350"></canvas>
  <div class="phase-bar">
    <div style="flex:3.3;background:rgba(34,197,94,0.3);">Early inspiral</div>
    <div style="flex:3;background:rgba(99,102,241,0.4);">Late inspiral</div>
    <div style="flex:0.7;background:rgba(236,72,153,0.5);">Merger</div>
    <div style="flex:3;background:rgba(168,85,247,0.3);">Ringdown</div>
  </div>
</div>

<!-- Zeta evolution -->
<div class="card">
  <h2>üîÆ Œ∂ Correction Factor ‚Äî Primes Waking Up</h2>
  <canvas id="zetaChart" height="200"></canvas>
  <div class="note">
    Œ∂ = 1.0 means standard GR (primes silent). As the black holes spiral closer, 
    Œ∂ grows ‚Äî the substrate becomes active. At merger: <strong>Œ∂ ‚âà 1.27</strong> (27% amplification).
  </div>
</div>

<!-- Fingerprint highlight -->
<div class="fingerprint">
  <div class="big">21.4%</div>
  <div class="desc">Average substrate excess during merger phase</div>
  <div class="desc" style="margin-top:8px;">The dark substrate amplifies the gravitational wave by 21.4% in the last 10ms before merger.</div>
  <div class="desc">Standard GR does not predict this. The data is waiting to confirm or deny it.</div>
</div>

<!-- Phase breakdown -->
<div class="card">
  <h2>üìä Phase Breakdown</h2>
  <canvas id="phaseChart" height="220"></canvas>
</div>

<!-- What to look for -->
<div class="card">
  <h2>üîç What To Look For In LIGO Residuals</h2>
  <div class="note">
    <strong>The test:</strong> LIGO teams subtract their best-fit GR template from the raw data. 
    What's left are "residuals." If the dark substrate is real:<br><br>
    1. Residuals should show <strong>systematic excess power</strong> in the last ~10ms before merger<br>
    2. The excess should scale with <strong>total mass</strong> (bigger merger = bigger Œ∂)<br>
    3. Early inspiral residuals should be <strong>consistent with noise</strong> (Œ∂ ‚âà 1 there)<br>
    4. The pattern should be <strong>consistent across events</strong> (same physics, different sources)<br><br>
    <strong>Best events to check:</strong><br>
    ‚Ä¢ GW150914 (this one) ‚Äî loud, well-characterized<br>
    ‚Ä¢ GW190521 ‚Äî 150 M‚òâ total mass, strongest Œ∂ expected<br>
    ‚Ä¢ GW170817 ‚Äî neutron star merger, control case (weaker gravity, less Œ∂)
  </div>
</div>

<div style="text-align:center;padding:20px;font-size:0.72rem;color:var(--text-dim);">
  Data: LIGO Open Science Center (gwosc.org) ¬∑ Analysis: Riner Research ¬∑ Barron üê± ¬∑ Feb 2026
</div>

<script>
// Load data
let DATA = null;
let currentView = 'full';
let showObserved = true, showZeta = true, showDiff = false;

fetch('gw150914_substrate_data.json')
  .then(r => r.json())
  .then(d => { DATA = d; drawAll(); })
  .catch(e => {
    console.error('Failed to load data:', e);
    // Generate placeholder
    DATA = generatePlaceholder();
    drawAll();
  });

function generatePlaceholder() {
  const n = 1229;
  const times = [], h1 = [], h1z = [], zc = [], td = [];
  for (let i = 0; i < n; i++) {
    const t = -0.2 + (i / n) * 0.3;
    times.push(t);
    const tau = -t;
    let freq = tau > 0.001 ? 40 * Math.pow(0.2 / tau, 3/8) : 250;
    freq = Math.min(freq, 350);
    const amp = tau > 0 ? 1e-21 * Math.pow(freq / 40, 2/3) : 1e-21 * Math.exp((t) / 0.005);
    const h = amp * Math.sin(2 * Math.PI * freq * t);
    
    let z = 1;
    if (tau > 0.001) {
      const r_ratio = 3 * Math.pow(tau / 0.2, 0.25);
      const s = 1 + Math.pow(Math.max(r_ratio, 1.01), 3);
      z = s > 2 ? 1 + 1/(s-1) : 1.6;
    } else if (tau > -0.01) {
      z = 1.617;
    }
    const hz = h * Math.sqrt(z);
    h1.push(h); h1z.push(hz); zc.push(Math.sqrt(z)); td.push((hz - h) / 2);
  }
  return { times, h1_strain: h1, h1_zeta_predicted: h1z, zeta_correction: zc, td_delta: td };
}

function setView(v) {
  currentView = v;
  document.querySelectorAll('.controls button[id^="btn-"]').forEach(b => {
    if (b.id.startsWith('btn-f') || b.id.startsWith('btn-m') || b.id.startsWith('btn-l'))
      b.classList.remove('active');
  });
  document.getElementById('btn-' + (v === 'full' ? 'full' : v === 'merger' ? 'merger' : 'late')).classList.add('active');
  drawWaveform();
}

function toggleLine(line) {
  if (line === 'observed') showObserved = !showObserved;
  if (line === 'zeta') showZeta = !showZeta;
  if (line === 'diff') showDiff = !showDiff;
  document.getElementById('btn-' + (line === 'observed' ? 'observed' : line === 'zeta' ? 'zeta' : 'diff'))
    .classList.toggle('active');
  drawWaveform();
}

function drawAll() {
  if (!DATA) return;
  drawWaveform();
  drawZeta();
  drawPhase();
}

function drawWaveform() {
  if (!DATA) return;
  const canvas = document.getElementById('waveform');
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  canvas.width = canvas.clientWidth * dpr;
  canvas.height = canvas.clientHeight * dpr;
  ctx.scale(dpr, dpr);
  const W = canvas.clientWidth, H = canvas.clientHeight;
  
  ctx.fillStyle = '#0d0d24';
  ctx.fillRect(0, 0, W, H);
  
  const times = DATA.times;
  const h1 = DATA.h1_strain;
  const hz = DATA.h1_zeta_predicted;
  
  // View range
  let tMin, tMax;
  if (currentView === 'merger') { tMin = -0.03; tMax = 0.03; }
  else if (currentView === 'late') { tMin = -0.12; tMax = 0.02; }
  else { tMin = times[0]; tMax = times[times.length - 1]; }
  
  // Filter to view
  const viewIdx = [];
  for (let i = 0; i < times.length; i++) {
    if (times[i] >= tMin && times[i] <= tMax) viewIdx.push(i);
  }
  
  if (viewIdx.length === 0) return;
  
  // Y range
  let yMin = Infinity, yMax = -Infinity;
  for (const i of viewIdx) {
    if (showObserved) { yMin = Math.min(yMin, h1[i]); yMax = Math.max(yMax, h1[i]); }
    if (showZeta) { yMin = Math.min(yMin, hz[i]); yMax = Math.max(yMax, hz[i]); }
    if (showDiff) { const d = hz[i] - h1[i]; yMin = Math.min(yMin, d); yMax = Math.max(yMax, d); }
  }
  const yPad = (yMax - yMin) * 0.15;
  yMin -= yPad; yMax += yPad;
  
  const pad = { left: 70, right: 20, top: 20, bottom: 35 };
  const pw = W - pad.left - pad.right;
  const ph = H - pad.top - pad.bottom;
  
  function tx(t) { return pad.left + (t - tMin) / (tMax - tMin) * pw; }
  function ty(y) { return pad.top + (1 - (y - yMin) / (yMax - yMin)) * ph; }
  
  // Grid
  ctx.strokeStyle = '#1a1a3a';
  ctx.lineWidth = 0.5;
  // Zero line
  ctx.beginPath();
  ctx.moveTo(pad.left, ty(0));
  ctx.lineTo(W - pad.right, ty(0));
  ctx.stroke();
  
  // Merger region highlight
  ctx.fillStyle = 'rgba(236,72,153,0.06)';
  const mLeft = Math.max(tx(-0.01), pad.left);
  const mRight = Math.min(tx(0.01), W - pad.right);
  ctx.fillRect(mLeft, pad.top, mRight - mLeft, ph);
  
  // Merger label
  ctx.fillStyle = 'rgba(236,72,153,0.4)';
  ctx.font = '10px JetBrains Mono';
  ctx.textAlign = 'center';
  ctx.fillText('MERGER', (mLeft + mRight) / 2, pad.top + 14);
  
  // Time axis
  ctx.fillStyle = '#8888aa';
  ctx.font = '10px JetBrains Mono';
  ctx.textAlign = 'center';
  const nTicks = 8;
  for (let i = 0; i <= nTicks; i++) {
    const t = tMin + (tMax - tMin) * i / nTicks;
    const x = tx(t);
    ctx.fillText((t * 1000).toFixed(0) + 'ms', x, H - 5);
    ctx.strokeStyle = '#1a1a3a';
    ctx.beginPath(); ctx.moveTo(x, pad.top); ctx.lineTo(x, pad.top + ph); ctx.stroke();
  }
  
  // Y axis label
  ctx.save();
  ctx.translate(12, H / 2);
  ctx.rotate(-Math.PI / 2);
  ctx.fillStyle = '#8888aa';
  ctx.font = '10px JetBrains Mono';
  ctx.textAlign = 'center';
  ctx.fillText('Strain', 0, 0);
  ctx.restore();
  
  // Draw difference (background)
  if (showDiff) {
    ctx.strokeStyle = 'rgba(255,255,255,0.15)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    let first = true;
    for (const i of viewIdx) {
      const x = tx(times[i]);
      const y = ty(hz[i] - h1[i]);
      if (first) { ctx.moveTo(x, y); first = false; }
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
    
    // Fill area
    ctx.fillStyle = 'rgba(255,255,255,0.03)';
    ctx.beginPath();
    ctx.moveTo(tx(times[viewIdx[0]]), ty(0));
    for (const i of viewIdx) ctx.lineTo(tx(times[i]), ty(hz[i] - h1[i]));
    ctx.lineTo(tx(times[viewIdx[viewIdx.length-1]]), ty(0));
    ctx.fill();
  }
  
  // Draw observed
  if (showObserved) {
    ctx.strokeStyle = '#6366f1';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    let first = true;
    for (const i of viewIdx) {
      const x = tx(times[i]);
      const y = ty(h1[i]);
      if (first) { ctx.moveTo(x, y); first = false; }
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
  }
  
  // Draw zeta predicted
  if (showZeta) {
    ctx.strokeStyle = '#ec4899';
    ctx.lineWidth = 1.5;
    ctx.setLineDash([4, 3]);
    ctx.beginPath();
    let first = true;
    for (const i of viewIdx) {
      const x = tx(times[i]);
      const y = ty(hz[i]);
      if (first) { ctx.moveTo(x, y); first = false; }
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
    ctx.setLineDash([]);
  }
}

function drawZeta() {
  if (!DATA) return;
  const canvas = document.getElementById('zetaChart');
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  canvas.width = canvas.clientWidth * dpr;
  canvas.height = canvas.clientHeight * dpr;
  ctx.scale(dpr, dpr);
  const W = canvas.clientWidth, H = canvas.clientHeight;
  
  ctx.fillStyle = '#0d0d24';
  ctx.fillRect(0, 0, W, H);
  
  const times = DATA.times;
  const zc = DATA.zeta_correction;
  
  const pad = { left: 70, right: 20, top: 15, bottom: 35 };
  const pw = W - pad.left - pad.right;
  const ph = H - pad.top - pad.bottom;
  
  const tMin = times[0], tMax = times[times.length - 1];
  let zMax = 0;
  for (const z of zc) zMax = Math.max(zMax, z);
  zMax = Math.max(zMax, 1.3);
  const zMin = 0.98;
  
  function tx(t) { return pad.left + (t - tMin) / (tMax - tMin) * pw; }
  function ty(z) { return pad.top + (1 - (z - zMin) / (zMax - zMin)) * ph; }
  
  // Œ∂=1 line
  ctx.strokeStyle = 'rgba(34,197,94,0.3)';
  ctx.lineWidth = 1;
  ctx.setLineDash([4, 4]);
  ctx.beginPath();
  ctx.moveTo(pad.left, ty(1));
  ctx.lineTo(W - pad.right, ty(1));
  ctx.stroke();
  ctx.setLineDash([]);
  
  ctx.fillStyle = 'rgba(34,197,94,0.5)';
  ctx.font = '10px JetBrains Mono';
  ctx.fillText('Œ∂ = 1 (standard GR)', pad.left + 5, ty(1) - 5);
  
  // Merger highlight
  const mLeft = Math.max(tx(-0.01), pad.left);
  const mRight = Math.min(tx(0.01), W - pad.right);
  ctx.fillStyle = 'rgba(236,72,153,0.06)';
  ctx.fillRect(mLeft, pad.top, mRight - mLeft, ph);
  
  // Fill under curve
  ctx.fillStyle = 'rgba(168,85,247,0.15)';
  ctx.beginPath();
  ctx.moveTo(tx(times[0]), ty(1));
  for (let i = 0; i < times.length; i++) {
    ctx.lineTo(tx(times[i]), ty(zc[i]));
  }
  ctx.lineTo(tx(times[times.length-1]), ty(1));
  ctx.fill();
  
  // Line
  ctx.strokeStyle = '#a855f7';
  ctx.lineWidth = 2;
  ctx.beginPath();
  for (let i = 0; i < times.length; i++) {
    const x = tx(times[i]);
    const y = ty(zc[i]);
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }
  ctx.stroke();
  
  // Peak label
  let peakIdx = 0;
  for (let i = 1; i < zc.length; i++) if (zc[i] > zc[peakIdx]) peakIdx = i;
  
  ctx.fillStyle = '#ec4899';
  ctx.font = 'bold 11px JetBrains Mono';
  ctx.textAlign = 'center';
  ctx.fillText('Œ∂ = ' + zc[peakIdx].toFixed(3), tx(times[peakIdx]), ty(zc[peakIdx]) - 10);
  
  // Time axis
  ctx.fillStyle = '#8888aa';
  ctx.font = '10px JetBrains Mono';
  for (let i = 0; i <= 6; i++) {
    const t = tMin + (tMax - tMin) * i / 6;
    ctx.fillText((t * 1000).toFixed(0) + 'ms', tx(t), H - 5);
  }
  
  // Y label
  ctx.save();
  ctx.translate(12, H / 2);
  ctx.rotate(-Math.PI / 2);
  ctx.fillStyle = '#8888aa';
  ctx.textAlign = 'center';
  ctx.fillText('Œ∂ correction', 0, 0);
  ctx.restore();
}

function drawPhase() {
  if (!DATA) return;
  const canvas = document.getElementById('phaseChart');
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  canvas.width = canvas.clientWidth * dpr;
  canvas.height = canvas.clientHeight * dpr;
  ctx.scale(dpr, dpr);
  const W = canvas.clientWidth, H = canvas.clientHeight;
  
  ctx.fillStyle = '#0d0d24';
  ctx.fillRect(0, 0, W, H);
  
  const phases = [
    { name: 'Early Inspiral', boost: 0.0, color: '#22c55e', desc: 'Œ∂ ‚âà 1.000' },
    { name: 'Late Inspiral', boost: 0.35, color: '#6366f1', desc: 'Œ∂ ‚âà 1.003' },
    { name: 'Merger', boost: 21.37, color: '#ec4899', desc: 'Œ∂ ‚âà 1.214' },
    { name: 'Ringdown', boost: 0.0, color: '#a855f7', desc: 'Œ∂ ‚âà 1.000' },
  ];
  
  const pad = { left: 140, right: 60, top: 20, bottom: 20 };
  const barH = 32;
  const gap = 14;
  const maxBoost = 25;
  
  phases.forEach((p, i) => {
    const y = pad.top + i * (barH + gap);
    
    // Label
    ctx.fillStyle = var_text;
    ctx.font = '11px JetBrains Mono';
    ctx.textAlign = 'right';
    ctx.fillStyle = '#e0e0f0';
    ctx.fillText(p.name, pad.left - 12, y + barH / 2 + 4);
    
    // Bar track
    const bw = W - pad.left - pad.right;
    ctx.fillStyle = '#1a1a3a';
    ctx.beginPath();
    ctx.roundRect(pad.left, y, bw, barH, 6);
    ctx.fill();
    
    // Bar fill
    const fw = Math.max(2, (p.boost / maxBoost) * bw);
    ctx.fillStyle = p.color;
    ctx.globalAlpha = 0.7;
    ctx.beginPath();
    ctx.roundRect(pad.left, y, fw, barH, 6);
    ctx.fill();
    ctx.globalAlpha = 1;
    
    // Value
    ctx.fillStyle = p.boost > 0.5 ? '#fff' : '#8888aa';
    ctx.font = 'bold 11px JetBrains Mono';
    ctx.textAlign = 'left';
    const valX = pad.left + fw + 8;
    ctx.fillText(p.boost > 0 ? '+' + p.boost.toFixed(2) + '%' : '0%', valX, y + barH / 2 + 4);
    
    // Description
    ctx.fillStyle = '#8888aa';
    ctx.font = '9px JetBrains Mono';
    ctx.fillText(p.desc, valX + 70, y + barH / 2 + 4);
  });
}

// Fix: replace var_text reference
const var_text = '#e0e0f0';

window.addEventListener('resize', drawAll);
</script>
</body>
</html>
