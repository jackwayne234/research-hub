<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lesson 19 — Electrochemistry</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #1e2128;
  --bg-card: #262a33;
  --bg-input: #1a1d24;
  --border: #363b47;
  --text: #e2e4e9;
  --indigo: #6366f1;
  --green: #22c55e;
  --pink: #ec4899;
  --amber: #f59e0b;
  --indigo-dim: rgba(99,102,241,0.15);
  --green-dim: rgba(34,197,94,0.12);
  --pink-dim: rgba(236,72,153,0.13);
  --amber-dim: rgba(245,158,11,0.13);
  --red: #ef4444;
  --red-dim: rgba(239,68,68,0.13);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'JetBrains Mono', 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.7;
  min-height: 100vh;
}

/* TOP BAR */
.top-bar {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
  padding: 10px 20px;
  display: flex;
  align-items: center;
  gap: 14px;
}
.lesson-num {
  background: var(--indigo);
  color: #fff;
  font-weight: 700;
  font-size: 15px;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.lesson-title {
  font-weight: 600;
  font-size: 15px;
  color: var(--text);
  flex-shrink: 0;
}
.progress-wrap {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
}
.progress-track {
  flex: 1;
  height: 6px;
  background: var(--bg-input);
  border-radius: 999px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  background: var(--green);
  border-radius: 999px;
  width: 0%;
  transition: width 0.4s ease;
}
.progress-label {
  font-size: 11px;
  color: #888;
  white-space: nowrap;
  min-width: 70px;
  text-align: right;
}

/* MAIN */
.main { max-width: 860px; margin: 0 auto; padding: 28px 20px 80px; }

/* SECTION CARDS */
.section-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-bottom: 16px;
  overflow: hidden;
  transition: border-color 0.3s;
}
.section-card.completed { border-color: var(--green); }
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  cursor: pointer;
  user-select: none;
  gap: 12px;
}
.section-header:hover { background: rgba(255,255,255,0.02); }
.section-header-left { display: flex; align-items: center; gap: 12px; }
.section-num-badge {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  background: var(--indigo-dim);
  border: 1px solid var(--indigo);
  color: var(--indigo);
  font-weight: 700;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.section-title { font-weight: 600; font-size: 14px; }
.chevron {
  width: 20px;
  height: 20px;
  stroke: #888;
  flex-shrink: 0;
  transition: transform 0.35s cubic-bezier(.34,1.56,.64,1);
}
.section-card.open .chevron { transform: rotate(180deg); }
.section-body {
  display: none;
  padding: 0 20px 20px;
  border-top: 1px solid var(--border);
}
.section-card.open .section-body { display: block; }

/* CONTENT ELEMENTS */
p { margin-bottom: 12px; color: var(--text); }
h3 { font-size: 13px; font-weight: 700; color: var(--amber); margin: 18px 0 8px; text-transform: uppercase; letter-spacing: 0.08em; }
h4 { font-size: 13px; font-weight: 600; color: var(--text); margin: 14px 0 6px; }

.formula-box {
  background: var(--indigo-dim);
  border: 1px solid var(--indigo);
  border-radius: 8px;
  padding: 14px 16px;
  margin: 12px 0;
  font-size: 13px;
}
.formula-box.green {
  background: var(--green-dim);
  border-color: var(--green);
}
.formula-box.pink {
  background: var(--pink-dim);
  border-color: var(--pink);
}
.formula-box.amber {
  background: var(--amber-dim);
  border-color: var(--amber);
}
.formula-box.red {
  background: var(--red-dim);
  border-color: var(--red);
}
.formula-title {
  font-weight: 700;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 6px;
  opacity: 0.7;
}
.formula-main {
  font-size: 16px;
  font-weight: 700;
  letter-spacing: 0.02em;
}
.formula-sub { font-size: 12px; margin-top: 6px; opacity: 0.8; }

.key-point {
  background: var(--amber-dim);
  border-left: 3px solid var(--amber);
  border-radius: 0 8px 8px 0;
  padding: 10px 14px;
  margin: 10px 0;
  font-size: 13px;
}

.navy-context {
  background: rgba(99,102,241,0.1);
  border: 1px solid rgba(99,102,241,0.4);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 14px 0;
  font-size: 13px;
}
.navy-context-title {
  color: var(--indigo);
  font-weight: 700;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 6px;
}

/* TABLE */
.data-table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
  font-size: 12.5px;
}
.data-table th {
  background: var(--bg-input);
  color: var(--indigo);
  padding: 8px 12px;
  text-align: left;
  font-weight: 600;
  border: 1px solid var(--border);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.06em;
}
.data-table td {
  padding: 7px 12px;
  border: 1px solid var(--border);
  vertical-align: top;
}
.data-table tr:hover td { background: rgba(255,255,255,0.02); }
.pos-val { color: var(--green); font-weight: 600; }
.neg-val { color: var(--pink); font-weight: 600; }

/* INTERACTIVE AREA */
.interactive-area {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  margin: 14px 0;
}
.interactive-title {
  font-weight: 700;
  font-size: 11px;
  color: var(--amber);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: 12px;
}
.slider-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}
.slider-label { font-size: 12px; width: 180px; flex-shrink: 0; }
input[type=range] {
  flex: 1;
  min-width: 100px;
  accent-color: var(--indigo);
  cursor: pointer;
}
.readout {
  font-weight: 700;
  color: var(--green);
  min-width: 80px;
  text-align: right;
  font-size: 13px;
}
.result-display {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 10px 14px;
  margin-top: 10px;
  font-size: 13px;
}
.result-val { font-size: 18px; font-weight: 700; color: var(--green); }
.result-val.negative { color: var(--pink); }

/* SVG CELL DIAGRAM */
.cell-diagram-wrap {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  margin: 14px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}
svg.cell-svg { width: 100%; max-width: 600px; height: auto; }

/* PROBLEMS */
.problem {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  margin: 12px 0;
}
.problem-label {
  font-weight: 700;
  font-size: 11px;
  color: var(--indigo);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 8px;
}
.problem-text { font-size: 13px; margin-bottom: 10px; }
.input-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}
.num-input {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px;
  padding: 6px 10px;
  width: 120px;
}
.num-input:focus { outline: none; border-color: var(--indigo); }
.check-btn {
  background: var(--indigo);
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 6px 14px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.2s;
}
.check-btn:hover { opacity: 0.85; }
.feedback { font-size: 12px; margin-top: 8px; padding: 6px 10px; border-radius: 6px; display: none; }
.feedback.correct { display: block; background: var(--green-dim); color: var(--green); border: 1px solid rgba(34,197,94,0.3); }
.feedback.incorrect { display: block; background: var(--red-dim); color: #f87171; border: 1px solid rgba(239,68,68,0.3); }
.unit-label { font-size: 12px; color: #888; }

/* MC BUTTONS */
.mc-options { display: flex; flex-direction: column; gap: 6px; margin-top: 8px; }
.mc-btn {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  padding: 8px 12px;
  cursor: pointer;
  text-align: left;
  transition: border-color 0.2s, background 0.2s;
}
.mc-btn:hover:not(.disabled) { border-color: var(--indigo); background: var(--indigo-dim); }
.mc-btn.disabled { cursor: default; opacity: 0.7; }
.mc-btn.correct { border-color: var(--green); background: var(--green-dim); color: var(--green); }
.mc-btn.wrong { border-color: var(--red); background: var(--red-dim); color: #f87171; }

/* QUIZ */
.quiz-section { margin-top: 4px; }
.quiz-score-bar {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px 16px;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.quiz-score-label { font-size: 12px; color: #888; }
.quiz-score-val { font-size: 18px; font-weight: 700; color: var(--green); }
.quiz-q {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  margin-bottom: 12px;
}
.quiz-q-num {
  font-size: 11px;
  color: var(--indigo);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 6px;
}
.quiz-q-text { font-size: 13px; margin-bottom: 10px; }
.quiz-choices { display: flex; flex-direction: column; gap: 6px; }
.choice-btn {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  padding: 8px 12px;
  cursor: pointer;
  text-align: left;
  transition: border-color 0.2s, background 0.2s;
}
.choice-btn:hover:not(.disabled) { border-color: var(--indigo); background: var(--indigo-dim); }
.choice-btn.disabled { cursor: default; }
.choice-btn.selected-correct { border-color: var(--green); background: var(--green-dim); color: var(--green); }
.choice-btn.selected-wrong { border-color: var(--red); background: var(--red-dim); color: #f87171; }
.choice-btn.reveal-correct { border-color: var(--green); background: var(--green-dim); color: var(--green); }
.reset-quiz-btn {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  padding: 8px 16px;
  cursor: pointer;
  margin-top: 12px;
  transition: border-color 0.2s;
}
.reset-quiz-btn:hover { border-color: var(--indigo); }

/* ANIMATIONS */
@keyframes pop {
  0% { transform: scale(1); }
  40% { transform: scale(1.03); }
  100% { transform: scale(1); }
}
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}
.pop { animation: pop 0.35s ease; }
.shake { animation: shake 0.4s ease; }

/* OXIDATION STATES GRID */
.rules-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin: 10px 0;
}
.rule-card {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px 12px;
  font-size: 12px;
}
.rule-num { color: var(--indigo); font-weight: 700; margin-right: 6px; }

/* HALF REACTION STEPS */
.steps { list-style: none; counter-reset: step-counter; }
.steps li {
  counter-increment: step-counter;
  padding: 6px 0 6px 36px;
  position: relative;
  font-size: 13px;
  border-bottom: 1px solid rgba(255,255,255,0.04);
}
.steps li:last-child { border-bottom: none; }
.steps li::before {
  content: counter(step-counter);
  position: absolute;
  left: 0;
  top: 6px;
  width: 24px;
  height: 24px;
  background: var(--indigo-dim);
  border: 1px solid var(--indigo);
  border-radius: 50%;
  color: var(--indigo);
  font-weight: 700;
  font-size: 11px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  line-height: 22px;
}

/* AGENT TAGS */
.tag {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  margin: 0 3px;
}
.tag-ox { background: var(--pink-dim); color: var(--pink); border: 1px solid rgba(236,72,153,0.3); }
.tag-red { background: var(--green-dim); color: var(--green); border: 1px solid rgba(34,197,94,0.3); }
.tag-cathode { background: var(--green-dim); color: var(--green); border: 1px solid rgba(34,197,94,0.3); }
.tag-anode { background: var(--pink-dim); color: var(--pink); border: 1px solid rgba(236,72,153,0.3); }

/* RESPONSIVE */
@media (max-width: 640px) {
  .top-bar { flex-wrap: wrap; }
  .progress-wrap { width: 100%; }
  .rules-grid { grid-template-columns: 1fr; }
  .slider-label { width: 100%; }
  .data-table { font-size: 11px; }
  .data-table th, .data-table td { padding: 6px 8px; }
  .formula-main { font-size: 14px; }
}

/* SUB / SUP */
sub, sup { font-size: 0.78em; }

/* DIVIDER */
.divider { border: none; border-top: 1px solid var(--border); margin: 14px 0; }

/* HIGHLIGHT */
.hl-indigo { color: var(--indigo); font-weight: 600; }
.hl-green { color: var(--green); font-weight: 600; }
.hl-pink { color: var(--pink); font-weight: 600; }
.hl-amber { color: var(--amber); font-weight: 600; }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="top-bar">
  <div class="lesson-num">19</div>
  <div class="lesson-title">Electrochemistry</div>
  <div class="progress-wrap">
    <div class="progress-track">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <div class="progress-label" id="progressLabel">0 / 8 sections</div>
  </div>
</div>

<div class="main">

<!-- ============================================================ -->
<!-- SECTION 1: REDOX & OXIDATION STATES -->
<!-- ============================================================ -->
<div class="section-card" data-section="1">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">1</div>
      <div class="section-title">Redox Reactions &amp; Oxidation States</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">
    <p>Redox (reduction-oxidation) reactions involve the transfer of electrons between species. Every redox reaction has two simultaneous half-reactions — one oxidation, one reduction. Electrochemistry exploits this transfer to do electrical work or to drive chemical change.</p>

    <div class="key-point">
      <strong>Memory anchor:</strong> OIL RIG — Oxidation Is Loss of electrons, Reduction Is Gain of electrons. The species that gets oxidized is the <em>reducing agent</em> (it donates electrons). The species reduced is the <em>oxidizing agent</em> (it accepts electrons).
    </div>

    <h3>Rules for Assigning Oxidation States</h3>
    <div class="rules-grid">
      <div class="rule-card"><span class="rule-num">1</span>Pure element: OS = 0 (e.g., Fe, O<sub>2</sub>, Cl<sub>2</sub>)</div>
      <div class="rule-card"><span class="rule-num">2</span>Monatomic ion: OS = charge (Na<sup>+</sup> = +1, Cl<sup>-</sup> = -1)</div>
      <div class="rule-card"><span class="rule-num">3</span>O in compounds = -2 (except peroxides: -1, OF<sub>2</sub>: +2)</div>
      <div class="rule-card"><span class="rule-num">4</span>H in compounds = +1 (except metal hydrides: -1)</div>
      <div class="rule-card"><span class="rule-num">5</span>F always = -1 (most electronegative)</div>
      <div class="rule-card"><span class="rule-num">6</span>Sum of OS in neutral molecule = 0; in ion = ion charge</div>
    </div>

    <h4>Example: Assign OS to Cr in Cr<sub>2</sub>O<sub>7</sub><sup>2-</sup></h4>
    <div class="formula-box">
      <div class="formula-sub">2(Cr) + 7(-2) = -2 &nbsp;→&nbsp; 2(Cr) = -2 + 14 = +12 &nbsp;→&nbsp; <strong>Cr = +6</strong></div>
    </div>

    <h3>Balancing Redox Reactions — Half-Reaction Method (Acidic Solution)</h3>
    <ol class="steps">
      <li>Write unbalanced half-reactions (oxidation and reduction separately)</li>
      <li>Balance all atoms <em>except</em> H and O</li>
      <li>Balance O by adding H<sub>2</sub>O to the deficient side</li>
      <li>Balance H by adding H<sup>+</sup> to the deficient side</li>
      <li>Balance charge by adding electrons (e<sup>-</sup>) to the more positive side</li>
      <li>Multiply each half-reaction so electrons cancel, then add them together</li>
      <li>Simplify if possible (cancel spectator species)</li>
    </ol>

    <h4>For Basic Solution</h4>
    <p>Follow the acidic method, then add equal OH<sup>-</sup> to both sides to neutralize H<sup>+</sup>, combining H<sup>+</sup> + OH<sup>-</sup> → H<sub>2</sub>O.</p>

    <h4>Worked Example: MnO<sub>4</sub><sup>-</sup> + Fe<sup>2+</sup> → Mn<sup>2+</sup> + Fe<sup>3+</sup> (acidic)</h4>
    <div class="formula-box pink">
      <div class="formula-title">Oxidation Half-Reaction</div>
      <div class="formula-sub">Fe<sup>2+</sup> → Fe<sup>3+</sup> + e<sup>-</sup> &nbsp;&nbsp;(×5 to match electrons)</div>
    </div>
    <div class="formula-box green">
      <div class="formula-title">Reduction Half-Reaction</div>
      <div class="formula-sub">MnO<sub>4</sub><sup>-</sup> + 8H<sup>+</sup> + 5e<sup>-</sup> → Mn<sup>2+</sup> + 4H<sub>2</sub>O</div>
    </div>
    <div class="formula-box amber">
      <div class="formula-title">Overall (Balanced)</div>
      <div class="formula-sub">MnO<sub>4</sub><sup>-</sup> + 8H<sup>+</sup> + 5Fe<sup>2+</sup> → Mn<sup>2+</sup> + 5Fe<sup>3+</sup> + 4H<sub>2</sub>O</div>
      <div class="formula-sub">Mn: +7 → +2 (gained 5e<sup>-</sup>, <span class="hl-green">REDUCED, oxidizing agent</span>) &nbsp;|&nbsp; Fe: +2 → +3 (lost 1e<sup>-</sup>, <span class="hl-pink">OXIDIZED, reducing agent</span>)</div>
    </div>

    <div class="navy-context">
      <div class="navy-context-title">Navy Context — Corrosion as Spontaneous Redox</div>
      Ship hull corrosion is a redox reaction: Fe (anode, oxidized) → Fe<sup>2+</sup> + 2e<sup>-</sup>. O<sub>2</sub> from seawater is the oxidizing agent (cathode, reduced). Understanding which species acts as oxidizing/reducing agent is the first step to designing cathodic protection systems.
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 2: GALVANIC CELLS -->
<!-- ============================================================ -->
<div class="section-card" data-section="2">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">2</div>
      <div class="section-title">Galvanic (Voltaic) Cells</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">
    <p>A galvanic (voltaic) cell converts spontaneous chemical energy into electrical energy. The key insight from thermodynamics: a spontaneous reaction has ΔG &lt; 0, and by channeling that driving force through a circuit, you extract useful electrical work.</p>

    <div class="formula-box">
      <div class="formula-title">Cell Anatomy</div>
      <div class="formula-sub">
        <span class="tag tag-anode">ANODE</span> — oxidation occurs, negative electrode in galvanic cell, source of electrons<br>
        <span class="tag tag-cathode">CATHODE</span> — reduction occurs, positive electrode in galvanic cell, sink for electrons<br>
        <strong>Salt Bridge</strong> — allows ion flow (maintains electrical neutrality) without mixing solutions<br>
        <strong>External circuit</strong> — electrons flow from anode to cathode
      </div>
    </div>

    <div class="key-point">
      <strong>Mnemonic:</strong> "An Ox, Red Cat" — ANode = OXidation, REDuction = CAThode. Electrons always flow anode → cathode in the external wire.
    </div>

    <h3>Standard Cell Notation</h3>
    <div class="formula-box">
      <div class="formula-main">Zn(s) | Zn²⁺(aq) ‖ Cu²⁺(aq) | Cu(s)</div>
      <div class="formula-sub">
        Single line | = phase boundary &nbsp;&nbsp; Double line ‖ = salt bridge<br>
        Left side = anode (oxidation) &nbsp;&nbsp; Right side = cathode (reduction)<br>
        This is the Daniell cell: Zn is sacrificed, Cu²⁺ deposits
      </div>
    </div>

    <!-- INTERACTIVE SVG CELL DIAGRAM -->
    <div class="cell-diagram-wrap">
      <div class="interactive-title">Daniell Cell — Interactive Diagram</div>
      <svg class="cell-svg" viewBox="0 0 580 310" xmlns="http://www.w3.org/2000/svg" font-family="JetBrains Mono, monospace">

        <!-- Background -->
        <rect width="580" height="310" fill="#1a1d24" rx="10"/>

        <!-- Anode beaker (left) -->
        <rect x="30" y="80" width="190" height="170" rx="4" fill="none" stroke="#ec4899" stroke-width="2"/>
        <rect x="30" y="200" width="190" height="50" rx="0 0 4 4" fill="rgba(236,72,153,0.08)"/>
        <text x="125" y="235" fill="#ec4899" font-size="11" text-anchor="middle" font-weight="600">ZnSO₄(aq)</text>

        <!-- Cathode beaker (right) -->
        <rect x="360" y="80" width="190" height="170" rx="4" fill="none" stroke="#22c55e" stroke-width="2"/>
        <rect x="360" y="200" width="190" height="50" rx="0 0 4 4" fill="rgba(34,197,94,0.08)"/>
        <text x="455" y="235" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="600">CuSO₄(aq)</text>

        <!-- Salt bridge -->
        <rect x="200" y="100" width="180" height="28" rx="14" fill="#363b47" stroke="#6366f1" stroke-width="1.5"/>
        <text x="290" y="118" fill="#6366f1" font-size="11" text-anchor="middle" font-weight="600">Salt Bridge (KNO₃)</text>
        <!-- Ion arrows in salt bridge -->
        <text x="232" y="134" fill="#888" font-size="9" text-anchor="middle">K⁺ →</text>
        <text x="350" y="134" fill="#888" font-size="9" text-anchor="middle">← NO₃⁻</text>

        <!-- Anode electrode (Zn) -->
        <rect x="105" y="90" width="18" height="130" rx="2" fill="#b8b8b8"/>
        <text x="114" y="86" fill="#e2e4e9" font-size="12" text-anchor="middle" font-weight="700">Zn</text>

        <!-- Cathode electrode (Cu) -->
        <rect x="455" y="90" width="18" height="130" rx="2" fill="#c47a27"/>
        <text x="464" y="86" fill="#e2e4e9" font-size="12" text-anchor="middle" font-weight="700">Cu</text>

        <!-- Wire on top -->
        <line x1="114" y1="90" x2="114" y2="40" stroke="#f59e0b" stroke-width="2.5"/>
        <line x1="114" y1="40" x2="464" y2="40" stroke="#f59e0b" stroke-width="2.5"/>
        <line x1="464" y1="40" x2="464" y2="90" stroke="#f59e0b" stroke-width="2.5"/>

        <!-- Voltmeter -->
        <circle cx="290" cy="40" r="20" fill="#262a33" stroke="#f59e0b" stroke-width="2"/>
        <text x="290" y="36" fill="#f59e0b" font-size="9" text-anchor="middle">V</text>
        <text x="290" y="48" fill="#22c55e" font-size="9" text-anchor="middle" font-weight="700">+1.10V</text>

        <!-- Electron flow arrows along wire -->
        <text x="185" y="35" fill="#6366f1" font-size="12" text-anchor="middle">e⁻</text>
        <polygon points="195,40 205,35 205,45" fill="#6366f1"/>
        <text x="385" y="35" fill="#6366f1" font-size="12" text-anchor="middle">e⁻</text>
        <polygon points="395,40 405,35 405,45" fill="#6366f1"/>

        <!-- ANODE label -->
        <text x="125" y="70" fill="#ec4899" font-size="12" text-anchor="middle" font-weight="700">ANODE (−)</text>
        <text x="125" y="270" fill="#ec4899" font-size="10" text-anchor="middle">Zn → Zn²⁺ + 2e⁻</text>
        <text x="125" y="284" fill="#ec4899" font-size="10" text-anchor="middle">OXIDATION</text>

        <!-- CATHODE label -->
        <text x="455" y="70" fill="#22c55e" font-size="12" text-anchor="middle" font-weight="700">CATHODE (+)</text>
        <text x="455" y="270" fill="#22c55e" font-size="10" text-anchor="middle">Cu²⁺ + 2e⁻ → Cu</text>
        <text x="455" y="284" fill="#22c55e" font-size="10" text-anchor="middle">REDUCTION</text>

        <!-- Zn²⁺ dissolving arrows -->
        <path d="M 125 160 Q 90 175 75 190" stroke="#ec4899" stroke-width="1.5" fill="none" stroke-dasharray="4,3"/>
        <text x="60" y="195" fill="#ec4899" font-size="9">Zn²⁺</text>

        <!-- Cu²⁺ depositing arrows -->
        <path d="M 435 175 Q 450 165 460 155" stroke="#22c55e" stroke-width="1.5" fill="none" stroke-dasharray="4,3"/>
        <text x="420" y="170" fill="#22c55e" font-size="9">Cu²⁺</text>
      </svg>
      <p style="font-size:12px;color:#888;text-align:center;">Electrons flow through the external wire from the Zn anode to the Cu cathode. The salt bridge carries ionic current internally to complete the circuit.</p>
    </div>

    <h3>Half-Reactions for Daniell Cell</h3>
    <div class="formula-box pink">
      <div class="formula-title">Anode — Oxidation</div>
      <div class="formula-main">Zn(s) → Zn²⁺(aq) + 2e⁻</div>
    </div>
    <div class="formula-box green">
      <div class="formula-title">Cathode — Reduction</div>
      <div class="formula-main">Cu²⁺(aq) + 2e⁻ → Cu(s)</div>
    </div>
    <div class="formula-box amber">
      <div class="formula-title">Overall Cell Reaction</div>
      <div class="formula-main">Zn(s) + Cu²⁺(aq) → Zn²⁺(aq) + Cu(s)</div>
      <div class="formula-sub">E°cell = +1.10 V &nbsp;(spontaneous: positive E°)</div>
    </div>

    <div class="navy-context">
      <div class="navy-context-title">Navy Context — Submarine Lead-Acid Batteries</div>
      Submarine diesel-electric submarines rely on banks of lead-acid cells. Each cell is a galvanic cell during discharge: Pb anode (oxidized to PbSO₄), PbO₂ cathode (reduced to PbSO₄). Cell notation: Pb|PbSO₄|H₂SO₄|PbSO₄|PbO₂. The cell voltage is ~2.0 V per cell; 120 cells in series yield 240 V for propulsion.
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 3: STANDARD CELL POTENTIALS -->
<!-- ============================================================ -->
<div class="section-card" data-section="3">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">3</div>
      <div class="section-title">Standard Reduction Potentials &amp; E°cell</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">
    <p>Standard reduction potentials (E°) measure the tendency of a half-reaction to proceed as a reduction under standard conditions (1 M, 1 atm, 25°C). They are measured relative to the Standard Hydrogen Electrode (SHE), defined as 0.00 V.</p>

    <div class="formula-box">
      <div class="formula-title">Standard Cell Potential</div>
      <div class="formula-main">E°cell = E°cathode − E°anode</div>
      <div class="formula-sub">
        Both values taken from the reduction potential table.<br>
        E°cell &gt; 0 → spontaneous reaction (ΔG &lt; 0)<br>
        E°cell &lt; 0 → non-spontaneous (requires energy input)
      </div>
    </div>

    <div class="key-point">
      <strong>Critical point:</strong> When you flip a half-reaction to write it as oxidation, you do NOT flip the sign when looking it up — you subtract E°anode (its reduction value) from E°cathode. Do not change the sign of E° from the table; the subtraction handles it.
    </div>

    <h3>Selected Standard Reduction Potentials (25°C)</h3>
    <table class="data-table">
      <thead>
        <tr>
          <th>Half-Reaction (Reduction)</th>
          <th>E° (V)</th>
          <th>Tendency</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>F₂ + 2e⁻ → 2F⁻</td><td class="pos-val">+2.87</td><td>Strongest oxidizing agent</td></tr>
        <tr><td>MnO₄⁻ + 8H⁺ + 5e⁻ → Mn²⁺ + 4H₂O</td><td class="pos-val">+1.51</td><td>Strong ox. agent</td></tr>
        <tr><td>Cl₂ + 2e⁻ → 2Cl⁻</td><td class="pos-val">+1.36</td><td></td></tr>
        <tr><td>O₂ + 4H⁺ + 4e⁻ → 2H₂O</td><td class="pos-val">+1.23</td><td>Drives corrosion</td></tr>
        <tr><td>Cu²⁺ + 2e⁻ → Cu</td><td class="pos-val">+0.34</td><td></td></tr>
        <tr style="background:rgba(99,102,241,0.07)"><td>2H⁺ + 2e⁻ → H₂</td><td><strong>0.00</strong></td><td>SHE Reference</td></tr>
        <tr><td>Pb²⁺ + 2e⁻ → Pb</td><td class="neg-val">−0.13</td><td></td></tr>
        <tr><td>Ni²⁺ + 2e⁻ → Ni</td><td class="neg-val">−0.26</td><td></td></tr>
        <tr><td>Zn²⁺ + 2e⁻ → Zn</td><td class="neg-val">−0.76</td><td>Sacrificial anode</td></tr>
        <tr><td>Al³⁺ + 3e⁻ → Al</td><td class="neg-val">−1.66</td><td></td></tr>
        <tr><td>Mg²⁺ + 2e⁻ → Mg</td><td class="neg-val">−2.37</td><td></td></tr>
        <tr><td>Li⁺ + e⁻ → Li</td><td class="neg-val">−3.04</td><td>Strongest reducing agent</td></tr>
      </tbody>
    </table>

    <h4>Predicting Spontaneity — Daniell Cell Check</h4>
    <div class="formula-box green">
      <div class="formula-sub">
        Cathode (Cu²⁺/Cu): E° = +0.34 V<br>
        Anode (Zn²⁺/Zn): E° = −0.76 V<br>
        <strong>E°cell = +0.34 − (−0.76) = +1.10 V → Spontaneous</strong>
      </div>
    </div>

    <h3>The Activity Series — Practical Tool</h3>
    <p>More negative E° → better reducing agent. A metal will spontaneously reduce the ions of any metal below it in the table (more positive E°). Zinc (−0.76 V) spontaneously reduces Cu²⁺ (+0.34 V) — that's why galvanized steel works.</p>

    <!-- INTERACTIVE: Compute E°cell -->
    <div class="interactive-area">
      <div class="interactive-title">Interactive — Compute E°cell from Half-Reactions</div>
      <p style="font-size:12px;margin-bottom:10px;">Select anode and cathode from preset values, get E°cell instantly:</p>
      <div class="slider-row">
        <span class="slider-label">E°cathode (V):</span>
        <input type="range" id="ecath" min="-304" max="287" value="34" step="1" oninput="computeEcell()">
        <span class="readout" id="ecath-val">+0.34 V</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">E°anode (V):</span>
        <input type="range" id="eanode" min="-304" max="287" value="-76" step="1" oninput="computeEcell()">
        <span class="readout" id="eanode-val">−0.76 V</span>
      </div>
      <div class="result-display">
        E°cell = E°cathode − E°anode = <span id="ecell-result" class="result-val">+1.10 V</span>
        <span id="ecell-spont" style="margin-left:10px;font-size:12px;"></span>
      </div>
    </div>

    <div class="navy-context">
      <div class="navy-context-title">Navy Context — Cathodic Protection (Hull Zinc Anodes)</div>
      Ship hulls use zinc sacrificial anodes (E° = −0.76 V) bolted to the steel hull (E° ≈ −0.44 V for Fe). Zinc has a more negative E°, so it oxidizes preferentially — it is the anode. Steel becomes the cathode and is protected. This is a deliberately engineered galvanic cell where the hull is forced into cathodic protection. The Navy replaces zinc anodes during dry-dock because they dissolve by design.
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 4: ΔG AND E RELATIONSHIP -->
<!-- ============================================================ -->
<div class="section-card" data-section="4">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">4</div>
      <div class="section-title">ΔG, E, and Equilibrium — The Thermodynamic Heart</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">
    <p>This is where electrochemistry reveals itself as applied thermodynamics. The cell potential E is directly related to the Gibbs free energy change — they are two languages describing the same spontaneity.</p>

    <div class="formula-box">
      <div class="formula-title">Core Thermodynamic Relationship</div>
      <div class="formula-main">ΔG = −nFE</div>
      <div class="formula-sub">
        n = moles of electrons transferred (dimensionless integer)<br>
        F = Faraday's constant = <strong>96,485 C/mol e⁻</strong><br>
        E = cell potential (volts = J/C)<br>
        ΔG in Joules: ΔG = −n × 96485 × E
      </div>
    </div>

    <div class="formula-box green">
      <div class="formula-title">Standard Conditions</div>
      <div class="formula-main">ΔG° = −nFE°</div>
      <div class="formula-sub">Valid when all species are at 1 M concentration, 1 atm pressure, 25°C (298 K)</div>
    </div>

    <h3>Spontaneity Sign Table</h3>
    <table class="data-table">
      <thead>
        <tr><th>E°cell</th><th>ΔG°</th><th>K</th><th>Result</th></tr>
      </thead>
      <tbody>
        <tr><td class="pos-val">&gt; 0</td><td class="neg-val">&lt; 0</td><td>&gt; 1</td><td>Spontaneous, products favored</td></tr>
        <tr><td>= 0</td><td>= 0</td><td>= 1</td><td>Equilibrium</td></tr>
        <tr><td class="neg-val">&lt; 0</td><td class="pos-val">&gt; 0</td><td>&lt; 1</td><td>Non-spontaneous, reactants favored</td></tr>
      </tbody>
    </table>

    <h3>Connection to Equilibrium Constant K</h3>
    <p>At equilibrium, ΔG = 0 and Q = K. Combining ΔG° = −RT ln K with ΔG° = −nFE°:</p>
    <div class="formula-box amber">
      <div class="formula-title">Equilibrium Constant from E°</div>
      <div class="formula-main">ΔG° = −RT ln K = −nFE°</div>
      <div class="formula-sub">
        ∴ &nbsp; ln K = nFE° / RT &nbsp;&nbsp; or at 25°C: &nbsp; log K = nE° / 0.0592<br>
        ∴ &nbsp; K = e^(nFE°/RT) = 10^(nE°/0.0592)
      </div>
    </div>

    <div class="key-point">
      <strong>Physics connection:</strong> ΔG = −nFE is work. The maximum electrical work extractable from a cell is W<sub>elec</sub> = nFE = −ΔG. This is the free energy converted to electrical energy — directly analogous to how a potential difference drives mechanical work in physics (W = qV, where q = nF here).
    </div>

    <h4>Worked Example: Daniell Cell ΔG°</h4>
    <div class="formula-box">
      <div class="formula-sub">
        E°cell = +1.10 V, n = 2 mol e⁻ transferred (per mol Zn)<br>
        ΔG° = −nFE° = −(2)(96485)(1.10) = −212,267 J = <strong>−212.3 kJ/mol</strong><br>
        Very negative → highly spontaneous (K = 10^(2×1.10/0.0592) = 10^37.2 ≈ 10³⁷)
      </div>
    </div>

    <!-- INTERACTIVE: ΔG ↔ E converter -->
    <div class="interactive-area">
      <div class="interactive-title">Interactive — ΔG ↔ E° Converter</div>
      <div class="slider-row">
        <span class="slider-label">n (electrons transferred):</span>
        <input type="range" id="dg-n" min="1" max="6" value="2" step="1" oninput="convertDGE()">
        <span class="readout" id="dg-n-val">2</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">E°cell (V):</span>
        <input type="range" id="dg-e" min="-300" max="300" value="110" step="1" oninput="convertDGE()">
        <span class="readout" id="dg-e-val">+1.10 V</span>
      </div>
      <div class="result-display">
        ΔG° = −nFE° = <span id="dg-result" class="result-val">−212.3 kJ/mol</span><br>
        <span style="font-size:12px;">log K = nE°/0.0592 = </span><span id="logk-result" style="color:var(--amber);font-weight:700;"></span><br>
        <span style="font-size:12px;">Spontaneous? </span><span id="dg-spont" style="font-weight:700;font-size:13px;"></span>
      </div>
    </div>

    <div class="navy-context">
      <div class="navy-context-title">Navy Context — Li-Ion Batteries in Submarines &amp; Aircraft</div>
      Modern nuclear submarines and Naval aircraft use Li-ion batteries for backup/emergency power. Each cell: E° ≈ 3.6 V, n = 1 (one Li⁺/Li per formula unit). ΔG° = −(1)(96485)(3.6) = −347 kJ per mole of Li — nearly twice the energy density of lead-acid. The thermodynamics (ΔG°) directly predicts energy storage capacity — the fundamental reason the Navy transitioned to Li-ion.
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 5: NERNST EQUATION -->
<!-- ============================================================ -->
<div class="section-card" data-section="5">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">5</div>
      <div class="section-title">Nernst Equation &amp; Concentration Cells</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">
    <p>E°cell assumes standard concentrations. In reality, battery voltage drops as reactants are consumed and products accumulate — that's the Nernst equation at work. It corrects E° for actual concentrations via the reaction quotient Q.</p>

    <div class="formula-box">
      <div class="formula-title">Nernst Equation — General Form</div>
      <div class="formula-main">E = E° − (RT/nF) ln Q</div>
      <div class="formula-sub">
        R = 8.314 J/(mol·K) &nbsp; T = temperature (K) &nbsp; n = electrons transferred &nbsp; F = 96485 C/mol
      </div>
    </div>

    <div class="formula-box green">
      <div class="formula-title">Nernst Equation — At 25°C (298 K) — Simplified</div>
      <div class="formula-main">E = E° − (0.0592/n) log Q</div>
      <div class="formula-sub">
        Derivation: RT/F at 298 K = (8.314 × 298)/96485 = 0.02569 V<br>
        Converting ln to log₁₀: multiply by ln(10) = 2.303<br>
        0.02569 × 2.303 = 0.05916 ≈ <strong>0.0592 V</strong><br><br>
        Q = [products]/[reactants] (activities; solids and pure liquids = 1)
      </div>
    </div>

    <div class="key-point">
      <strong>Physical intuition:</strong> If Q &lt; 1 (excess reactants), ln Q &lt; 0, so E &gt; E°. More reactant → larger driving force → higher voltage. As the cell discharges, Q increases, E decreases toward zero. At Q = K, E = 0 — the battery is dead (equilibrium).
    </div>

    <h3>Concentration Cells</h3>
    <p>A concentration cell is a galvanic cell where both half-reactions involve the same species but at different concentrations. E° = 0, but E ≠ 0 because Q ≠ 1.</p>
    <div class="formula-box pink">
      <div class="formula-title">Concentration Cell Example: Cu/Cu²⁺</div>
      <div class="formula-sub">
        Cu | Cu²⁺(0.010 M) ‖ Cu²⁺(1.00 M) | Cu<br>
        Anode: Cu → Cu²⁺(0.010 M) + 2e⁻ &nbsp;&nbsp; Cathode: Cu²⁺(1.00 M) + 2e⁻ → Cu<br>
        E° = 0 V &nbsp; Q = [0.010]/[1.00] = 0.010<br>
        E = 0 − (0.0592/2) log(0.010) = 0 − (0.0296)(−2) = <strong>+0.0592 V</strong>
      </div>
    </div>

    <!-- INTERACTIVE: Nernst Calculator -->
    <div class="interactive-area">
      <div class="interactive-title">Interactive — Nernst Equation Calculator (25°C)</div>
      <div class="slider-row">
        <span class="slider-label">E°cell (V):</span>
        <input type="range" id="nernst-e0" min="0" max="250" value="110" step="1" oninput="computeNernst()">
        <span class="readout" id="nernst-e0-val">+1.10 V</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">n (electrons):</span>
        <input type="range" id="nernst-n" min="1" max="6" value="2" step="1" oninput="computeNernst()">
        <span class="readout" id="nernst-n-val">2</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">[Products] (M):</span>
        <input type="range" id="nernst-prod" min="1" max="1000" value="100" step="1" oninput="computeNernst()">
        <span class="readout" id="nernst-prod-val">1.00 M</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">[Reactants] (M):</span>
        <input type="range" id="nernst-react" min="1" max="1000" value="100" step="1" oninput="computeNernst()">
        <span class="readout" id="nernst-react-val">1.00 M</span>
      </div>
      <div class="result-display">
        Q = [Prod]/[React] = <span id="nernst-q" style="color:var(--amber);font-weight:700;"></span><br>
        E = E° − (0.0592/n) log Q = <span id="nernst-result" class="result-val"></span>
      </div>
    </div>

    <h3>Effect of pH on Cell Potential</h3>
    <p>Many half-reactions involve H<sup>+</sup> (or OH<sup>-</sup>). Changing pH changes Q and thus E. For the O<sub>2</sub>/H<sub>2</sub>O half-reaction: E = 1.23 − (0.0592/4) log [1/[H⁺]⁴] = 1.23 − 0.0592 pH. At pH 7, E drops by 0.414 V to +0.816 V.</p>

    <div class="navy-context">
      <div class="navy-context-title">Navy Context — Battery State-of-Charge Monitoring</div>
      The Nernst equation explains why a battery's voltage indicates its state of charge. In a lead-acid submarine battery, the electrolyte is H₂SO₄. As discharge proceeds, H₂SO₄ is consumed (Q increases), and cell voltage drops predictably from 2.1 V (full) to ~1.75 V (discharged). Navy engineers measure electrolyte specific gravity (proportional to [H₂SO₄]) to assess charge remaining — a direct application of the Nernst equation linking concentration to cell potential.
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 6: ELECTROLYSIS & FARADAY'S LAWS -->
<!-- ============================================================ -->
<div class="section-card" data-section="6">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">6</div>
      <div class="section-title">Electrolysis &amp; Faraday's Laws</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">
    <p>Electrolysis reverses the galvanic process: an external power supply forces a non-spontaneous redox reaction to occur. The sign of ΔG° is positive, but electrical energy from the external source compensates. This is how metals are refined, objects are electroplated, and water is split into H₂ and O₂.</p>

    <div class="formula-box red">
      <div class="formula-title">Electrolytic Cell — Key Differences from Galvanic</div>
      <div class="formula-sub">
        • External power source drives current (forces non-spontaneous reaction)<br>
        • Anode = positive electrode (still oxidation occurs)<br>
        • Cathode = negative electrode (still reduction occurs)<br>
        • E°cell &lt; 0 — reaction requires energy input<br>
        • Overpotential: in practice, you need extra voltage beyond E°
      </div>
    </div>

    <h3>Faraday's First Law — Amount Deposited Proportional to Charge</h3>
    <div class="formula-box">
      <div class="formula-title">Faraday's First Law</div>
      <div class="formula-main">q = n × F = I × t</div>
      <div class="formula-sub">
        q = charge passed (Coulombs) &nbsp; I = current (Amperes) &nbsp; t = time (seconds)<br>
        n = moles of electrons &nbsp; F = 96,485 C/mol e⁻
      </div>
    </div>

    <h3>Faraday's Second Law — Mass Deposited</h3>
    <div class="formula-box green">
      <div class="formula-title">Mass Deposited (Electroplating Formula)</div>
      <div class="formula-main">m = (M × I × t) / (z × F)</div>
      <div class="formula-sub">
        m = mass deposited (grams)<br>
        M = molar mass of the element (g/mol)<br>
        I = current (A) &nbsp; t = time (s)<br>
        z = number of electrons transferred per ion (valence / ion charge magnitude)<br>
        F = 96,485 C/mol
      </div>
    </div>

    <h4>Worked Example: Electroplating Copper</h4>
    <div class="formula-box amber">
      <div class="formula-sub">
        Deposit copper from CuSO₄: Cu²⁺ + 2e⁻ → Cu &nbsp;&nbsp; (z = 2)<br>
        I = 2.00 A, t = 30 min = 1800 s, M(Cu) = 63.55 g/mol<br>
        m = (63.55 × 2.00 × 1800) / (2 × 96485)<br>
        m = 228,780 / 192,970 = <strong>1.186 g Cu deposited</strong>
      </div>
    </div>

    <h3>Important Electrolysis Processes</h3>
    <h4>Chlor-Alkali Process (Electrolysis of Brine)</h4>
    <div class="formula-box">
      <div class="formula-sub">
        Cathode: 2H₂O + 2e⁻ → H₂(g) + 2OH⁻ &nbsp; (or 2H⁺ + 2e⁻ → H₂)<br>
        Anode: 2Cl⁻ → Cl₂(g) + 2e⁻<br>
        Products: NaOH, Cl₂, H₂ — all industrially critical<br>
        Applied E needed: &gt; 1.36 V (+ overpotential ≈ 3–4 V in practice)
      </div>
    </div>

    <h4>Water Splitting (H₂ fuel production)</h4>
    <div class="formula-box pink">
      <div class="formula-sub">
        Cathode: 2H₂O + 2e⁻ → H₂ + 2OH⁻ &nbsp; E° = −0.83 V (basic)<br>
        Anode: 4OH⁻ → O₂ + 2H₂O + 4e⁻ &nbsp; E° = −0.40 V (basic, reversed)<br>
        E°cell = −0.40 − (−0.83) — wait, electrolysis: minimum applied V = +1.23 V (acidic) or ~1.23 V (basic)
      </div>
    </div>

    <!-- INTERACTIVE: Faraday Calculator -->
    <div class="interactive-area">
      <div class="interactive-title">Interactive — Faraday Electroplating Calculator</div>
      <div class="slider-row">
        <span class="slider-label">Current I (A):</span>
        <input type="range" id="far-I" min="10" max="500" value="200" step="10" oninput="computeFaraday()">
        <span class="readout" id="far-I-val">2.00 A</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">Time t (minutes):</span>
        <input type="range" id="far-t" min="1" max="120" value="30" step="1" oninput="computeFaraday()">
        <span class="readout" id="far-t-val">30 min</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">Molar mass M (g/mol):</span>
        <input type="range" id="far-M" min="20" max="200" value="64" step="1" oninput="computeFaraday()">
        <span class="readout" id="far-M-val">64 g/mol (Cu)</span>
      </div>
      <div class="slider-row">
        <span class="slider-label">Valence z:</span>
        <input type="range" id="far-z" min="1" max="4" value="2" step="1" oninput="computeFaraday()">
        <span class="readout" id="far-z-val">2</span>
      </div>
      <div class="result-display">
        Charge q = I × t = <span id="far-q" style="color:var(--amber);font-weight:700;"></span> C<br>
        Mass deposited = <span id="far-m" class="result-val"></span> g
      </div>
    </div>

    <div class="navy-context">
      <div class="navy-context-title">Navy Context — Chrome Electroplating on Ship Parts</div>
      Naval ships electroplate critical components (propeller shafts, gun barrels, hydraulic cylinders) with hard chrome using Cr³⁺ or Cr⁶⁺ baths. Using Faraday's law: to deposit 1 mm of chrome (density 7.19 g/cm³) on a 10 cm × 10 cm surface (mass ≈ 71.9 g, M=52 g/mol, z=3): I × t = (71.9 × 3 × 96485)/52 = 399,700 C. At 500 A, that takes 799 seconds ≈ 13 minutes. Faraday's law is the engineering formula Navy metal shops use daily.
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 7: PRACTICE PROBLEMS -->
<!-- ============================================================ -->
<div class="section-card" data-section="7">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">7</div>
      <div class="section-title">Practice Problems</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">

    <!-- Problem 1 -->
    <div class="problem">
      <div class="problem-label">Problem 1 — Oxidation State</div>
      <div class="problem-text">Assign the oxidation state of sulfur (S) in H₂SO₄. (H = +1, O = −2, molecule is neutral)</div>
      <div class="input-row">
        <input class="num-input" id="p1" type="number" step="1" placeholder="OS of S">
        <span class="unit-label">(integer)</span>
        <button class="check-btn" onclick="checkNum('p1', 6, 0)">Check</button>
      </div>
      <div class="feedback" id="p1-fb"></div>
    </div>

    <!-- Problem 2 -->
    <div class="problem">
      <div class="problem-label">Problem 2 — E°cell</div>
      <div class="problem-text">Calculate E°cell (in V) for a cell with cathode: Cl₂/Cl⁻ (E° = +1.36 V) and anode: Ni²⁺/Ni (E° = −0.26 V). Give your answer in V to 2 decimal places.</div>
      <div class="input-row">
        <input class="num-input" id="p2" type="number" step="0.01" placeholder="E°cell (V)">
        <span class="unit-label">V</span>
        <button class="check-btn" onclick="checkNum('p2', 1.62, 0.01)">Check</button>
      </div>
      <div class="feedback" id="p2-fb"></div>
    </div>

    <!-- Problem 3 -->
    <div class="problem">
      <div class="problem-label">Problem 3 — ΔG°</div>
      <div class="problem-text">For a cell with E°cell = +0.46 V and n = 3 mol e⁻, calculate ΔG° in kJ/mol. (F = 96485 C/mol). Give to 1 decimal place.</div>
      <div class="input-row">
        <input class="num-input" id="p3" type="number" step="0.1" placeholder="ΔG° (kJ/mol)">
        <span class="unit-label">kJ/mol</span>
        <button class="check-btn" onclick="checkNum('p3', -133.2, 0.5)">Check</button>
      </div>
      <div class="feedback" id="p3-fb"></div>
      <div style="font-size:11px;color:#888;margin-top:6px;">Hint: ΔG° = −nFE°, convert J to kJ</div>
    </div>

    <!-- Problem 4 -->
    <div class="problem">
      <div class="problem-label">Problem 4 — Nernst Equation</div>
      <div class="problem-text">For the Daniell cell (E° = +1.10 V, n = 2), calculate E (V) when [Zn²⁺] = 2.50 M and [Cu²⁺] = 0.10 M at 25°C. Q = [Zn²⁺]/[Cu²⁺]. Give to 3 decimal places.</div>
      <div class="input-row">
        <input class="num-input" id="p4" type="number" step="0.001" placeholder="E (V)">
        <span class="unit-label">V</span>
        <button class="check-btn" onclick="checkNum('p4', 1.071, 0.002)">Check</button>
      </div>
      <div class="feedback" id="p4-fb"></div>
      <div style="font-size:11px;color:#888;margin-top:6px;">Hint: E = 1.10 − (0.0592/2) log(2.50/0.10)</div>
    </div>

    <!-- Problem 5 -->
    <div class="problem">
      <div class="problem-label">Problem 5 — Faraday's Law</div>
      <div class="problem-text">A current of 3.50 A is passed through a AgNO₃ solution for 45.0 minutes. How many grams of silver (M = 107.87 g/mol, z = 1) are deposited? Give to 2 decimal places.</div>
      <div class="input-row">
        <input class="num-input" id="p5" type="number" step="0.01" placeholder="mass (g)">
        <span class="unit-label">g</span>
        <button class="check-btn" onclick="checkNum('p5', 10.59, 0.05)">Check</button>
      </div>
      <div class="feedback" id="p5-fb"></div>
      <div style="font-size:11px;color:#888;margin-top:6px;">Hint: m = MIt/(zF), t in seconds</div>
    </div>

    <!-- Problem 6 -->
    <div class="problem">
      <div class="problem-label">Problem 6 — Equilibrium from E°</div>
      <div class="problem-text">For a cell with E°cell = +0.74 V and n = 2, calculate log K at 25°C. (Use log K = nE°/0.0592). Give to 1 decimal place.</div>
      <div class="input-row">
        <input class="num-input" id="p6" type="number" step="0.1" placeholder="log K">
        <span class="unit-label">(dimensionless)</span>
        <button class="check-btn" onclick="checkNum('p6', 25.0, 0.2)">Check</button>
      </div>
      <div class="feedback" id="p6-fb"></div>
    </div>

  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 8: QUIZ -->
<!-- ============================================================ -->
<div class="section-card" data-section="8">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-header-left">
      <div class="section-num-badge">8</div>
      <div class="section-title">Quiz — 10 Questions</div>
    </div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>
  <div class="section-body">
    <div class="quiz-section">
      <div class="quiz-score-bar">
        <span class="quiz-score-label">Score:</span>
        <span class="quiz-score-val"><span id="quizScore">0</span> / 10</span>
        <button class="reset-quiz-btn" onclick="resetQuiz()">Reset Quiz</button>
      </div>

      <!-- Q1 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 1</div>
        <div class="quiz-q-text">In a galvanic cell, which process occurs at the anode?</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(1, this, false)">A) Reduction — gain of electrons</button>
          <button class="choice-btn" onclick="quizAnswer(1, this, true)">B) Oxidation — loss of electrons</button>
          <button class="choice-btn" onclick="quizAnswer(1, this, false)">C) Reduction — loss of electrons</button>
          <button class="choice-btn" onclick="quizAnswer(1, this, false)">D) Neither, the anode is inert</button>
        </div>
      </div>

      <!-- Q2 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 2</div>
        <div class="quiz-q-text">The oxidation state of Mn in KMnO₄ is:</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(2, this, false)">A) +2</button>
          <button class="choice-btn" onclick="quizAnswer(2, this, false)">B) +4</button>
          <button class="choice-btn" onclick="quizAnswer(2, this, true)">C) +7</button>
          <button class="choice-btn" onclick="quizAnswer(2, this, false)">D) +6</button>
        </div>
      </div>

      <!-- Q3 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 3</div>
        <div class="quiz-q-text">Given E°(Ag⁺/Ag) = +0.80 V and E°(Fe³⁺/Fe²⁺) = +0.77 V, what is E°cell if Fe²⁺ is oxidized and Ag⁺ is reduced?</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(3, this, false)">A) +1.57 V</button>
          <button class="choice-btn" onclick="quizAnswer(3, this, true)">B) +0.03 V</button>
          <button class="choice-btn" onclick="quizAnswer(3, this, false)">C) −0.03 V</button>
          <button class="choice-btn" onclick="quizAnswer(3, this, false)">D) −1.57 V</button>
        </div>
      </div>

      <!-- Q4 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 4</div>
        <div class="quiz-q-text">A positive E°cell corresponds to which sign of ΔG°?</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(4, this, true)">A) Negative ΔG° — spontaneous</button>
          <button class="choice-btn" onclick="quizAnswer(4, this, false)">B) Positive ΔG° — non-spontaneous</button>
          <button class="choice-btn" onclick="quizAnswer(4, this, false)">C) ΔG° = 0 — at equilibrium</button>
          <button class="choice-btn" onclick="quizAnswer(4, this, false)">D) ΔG° is independent of E°</button>
        </div>
      </div>

      <!-- Q5 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 5</div>
        <div class="quiz-q-text">What does the Nernst equation predict when Q &gt; K for a galvanic cell?</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(5, this, false)">A) E &gt; E°, voltage increases above standard</button>
          <button class="choice-btn" onclick="quizAnswer(5, this, false)">B) E = E°, no change</button>
          <button class="choice-btn" onclick="quizAnswer(5, this, true)">C) E &lt; 0, reaction is non-spontaneous in forward direction</button>
          <button class="choice-btn" onclick="quizAnswer(5, this, false)">D) E = 0, cell is at standard conditions</button>
        </div>
      </div>

      <!-- Q6 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 6</div>
        <div class="quiz-q-text">Faraday's constant (96,485 C/mol) physically represents:</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(6, this, false)">A) The charge of one proton</button>
          <button class="choice-btn" onclick="quizAnswer(6, this, true)">B) The total charge carried by one mole of electrons</button>
          <button class="choice-btn" onclick="quizAnswer(6, this, false)">C) The voltage of the standard hydrogen electrode</button>
          <button class="choice-btn" onclick="quizAnswer(6, this, false)">D) The molar mass of electrons</button>
        </div>
      </div>

      <!-- Q7 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 7</div>
        <div class="quiz-q-text">Zinc sacrificial anodes on a ship hull work because zinc:</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(7, this, false)">A) Has a more positive reduction potential than iron, so it reduces preferentially</button>
          <button class="choice-btn" onclick="quizAnswer(7, this, true)">B) Has a more negative reduction potential than iron, so it oxidizes preferentially</button>
          <button class="choice-btn" onclick="quizAnswer(7, this, false)">C) Is inert and forms a protective oxide layer only</button>
          <button class="choice-btn" onclick="quizAnswer(7, this, false)">D) Acts as a cathode and forces iron to oxidize</button>
        </div>
      </div>

      <!-- Q8 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 8</div>
        <div class="quiz-q-text">During electrolysis of water (2H₂O → 2H₂ + O₂), which gas evolves at the cathode?</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(8, this, true)">A) H₂ — reduction of H⁺ occurs at the cathode</button>
          <button class="choice-btn" onclick="quizAnswer(8, this, false)">B) O₂ — oxidation of H₂O occurs at the cathode</button>
          <button class="choice-btn" onclick="quizAnswer(8, this, false)">C) Both H₂ and O₂ evolve at the cathode equally</button>
          <button class="choice-btn" onclick="quizAnswer(8, this, false)">D) Neither; gas only evolves at the anode</button>
        </div>
      </div>

      <!-- Q9 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 9</div>
        <div class="quiz-q-text">For the reaction ΔG° = −nFE°, what is the value of ΔG° (in kJ/mol) for a cell with E° = +1.23 V and n = 4?</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(9, this, false)">A) −474.9 kJ/mol</button>
          <button class="choice-btn" onclick="quizAnswer(9, this, true)">B) −474.9 kJ/mol — wait, let me compute: 4 × 96485 × 1.23 = 474,706 J ≈ −474.7 kJ/mol</button>
          <button class="choice-btn" onclick="quizAnswer(9, this, false)">C) +237.3 kJ/mol</button>
          <button class="choice-btn" onclick="quizAnswer(9, this, false)">D) −118.7 kJ/mol</button>
        </div>
      </div>

      <!-- Q10 -->
      <div class="quiz-q">
        <div class="quiz-q-num">Question 10</div>
        <div class="quiz-q-text">A concentration cell has E° = 0. A cell is constructed with Cu|Cu²⁺(0.001 M)‖Cu²⁺(1.0 M)|Cu (n=2 at 25°C). What is E?</div>
        <div class="quiz-choices">
          <button class="choice-btn" onclick="quizAnswer(10, this, false)">A) 0 V — concentration cells can't produce voltage</button>
          <button class="choice-btn" onclick="quizAnswer(10, this, false)">B) +0.0296 V</button>
          <button class="choice-btn" onclick="quizAnswer(10, this, true)">C) +0.0888 V &nbsp;(E = −(0.0592/2) log(0.001/1.0) = 0.0296 × 3 = +0.0888 V)</button>
          <button class="choice-btn" onclick="quizAnswer(10, this, false)">D) −0.0888 V</button>
        </div>
      </div>

    </div>
  </div>
</div>

</div><!-- /main -->

<script>
// ============================================================
// PROGRESS & SECTION MANAGEMENT
// ============================================================
var completedSections = new Set();

function updateProgress() {
  var cards = document.querySelectorAll('.section-card');
  var total = cards.length;
  var pct = (completedSections.size / total) * 100;
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressLabel').textContent = completedSections.size + ' / ' + total + ' sections';
}

function markComplete(n) {
  if (completedSections.has(n)) return;
  completedSections.add(n);
  var card = document.querySelector('.section-card[data-section="' + n + '"]');
  if (card) card.classList.add('completed');
  updateProgress();
}

function toggleSection(header) {
  var card = header.parentElement;
  card.classList.toggle('open');
  if (card.classList.contains('open')) {
    markComplete(+card.getAttribute('data-section'));
  }
  updateProgress();
}

// ============================================================
// PROBLEM CHECKING
// ============================================================
function checkNum(id, answer, tol) {
  var inp = document.getElementById(id);
  var fb = document.getElementById(id + '-fb');
  var val = parseFloat(inp.value);
  if (isNaN(val)) {
    fb.className = 'feedback incorrect';
    fb.textContent = 'Enter a number.';
    inp.parentElement.parentElement.classList.add('shake');
    setTimeout(function() { inp.parentElement.parentElement.classList.remove('shake'); }, 400);
    return;
  }
  if (Math.abs(val - answer) <= tol) {
    fb.className = 'feedback correct';
    fb.textContent = 'Correct! The answer is ' + answer + '.';
    inp.parentElement.parentElement.classList.add('pop');
    setTimeout(function() { inp.parentElement.parentElement.classList.remove('pop'); }, 350);
  } else {
    fb.className = 'feedback incorrect';
    fb.textContent = 'Not quite. Try again. (Hint: near ' + answer.toFixed(2) + ')';
    inp.parentElement.parentElement.classList.add('shake');
    setTimeout(function() { inp.parentElement.parentElement.classList.remove('shake'); }, 400);
  }
}

function checkMC(btn, id, result) {
  var fb = document.getElementById(id + '-fb');
  var btns = btn.parentElement.querySelectorAll('.mc-btn');
  btns.forEach(function(b) { b.classList.add('disabled'); });
  if (result === 'correct') {
    btn.classList.add('correct');
    fb.className = 'feedback correct';
    fb.textContent = 'Correct!';
    btn.closest('.problem').classList.add('pop');
    setTimeout(function() { btn.closest('.problem').classList.remove('pop'); }, 350);
  } else {
    btn.classList.add('wrong');
    fb.className = 'feedback incorrect';
    fb.textContent = 'Not quite. Review the concept above.';
    btn.closest('.problem').classList.add('shake');
    setTimeout(function() { btn.closest('.problem').classList.remove('shake'); }, 400);
  }
}

// ============================================================
// QUIZ
// ============================================================
var quizScoreVal = 0, quizAnswered = new Set();

function quizAnswer(qn, btn, correct) {
  if (quizAnswered.has(qn)) return;
  quizAnswered.add(qn);
  var btns = btn.parentElement.querySelectorAll('.choice-btn');
  btns.forEach(function(b) { b.classList.add('disabled'); });
  if (correct) {
    btn.classList.add('selected-correct');
    quizScoreVal++;
    btn.closest('.quiz-q').classList.add('pop');
    setTimeout(function() { btn.closest('.quiz-q').classList.remove('pop'); }, 350);
  } else {
    btn.classList.add('selected-wrong');
    btns.forEach(function(b) {
      if (b.getAttribute('onclick') && b.getAttribute('onclick').indexOf('true') !== -1) {
        b.classList.add('reveal-correct');
      }
    });
    btn.closest('.quiz-q').classList.add('shake');
    setTimeout(function() { btn.closest('.quiz-q').classList.remove('shake'); }, 400);
  }
  document.getElementById('quizScore').textContent = quizScoreVal;
}

function resetQuiz() {
  quizScoreVal = 0;
  quizAnswered.clear();
  document.getElementById('quizScore').textContent = '0';
  document.querySelectorAll('.quiz-q .choice-btn').forEach(function(b) {
    b.className = 'choice-btn';
  });
}

// ============================================================
// INTERACTIVE: E°cell Calculator (Section 3)
// ============================================================
function computeEcell() {
  var ecath = parseInt(document.getElementById('ecath').value) / 100;
  var eanode = parseInt(document.getElementById('eanode').value) / 100;
  document.getElementById('ecath-val').textContent = (ecath >= 0 ? '+' : '') + ecath.toFixed(2) + ' V';
  document.getElementById('eanode-val').textContent = (eanode >= 0 ? '+' : '') + eanode.toFixed(2) + ' V';
  var ecell = ecath - eanode;
  var resultEl = document.getElementById('ecell-result');
  resultEl.textContent = (ecell >= 0 ? '+' : '') + ecell.toFixed(2) + ' V';
  resultEl.className = 'result-val' + (ecell < 0 ? ' negative' : '');
  var spontEl = document.getElementById('ecell-spont');
  if (ecell > 0) {
    spontEl.textContent = 'Spontaneous (ΔG < 0)';
    spontEl.style.color = 'var(--green)';
  } else if (ecell < 0) {
    spontEl.textContent = 'Non-spontaneous (ΔG > 0)';
    spontEl.style.color = '#f87171';
  } else {
    spontEl.textContent = 'Equilibrium (ΔG = 0)';
    spontEl.style.color = 'var(--amber)';
  }
}
computeEcell();

// ============================================================
// INTERACTIVE: ΔG ↔ E Converter (Section 4)
// ============================================================
function convertDGE() {
  var n = parseInt(document.getElementById('dg-n').value);
  var eRaw = parseInt(document.getElementById('dg-e').value) / 100;
  document.getElementById('dg-n-val').textContent = n;
  document.getElementById('dg-e-val').textContent = (eRaw >= 0 ? '+' : '') + eRaw.toFixed(2) + ' V';
  var F = 96485;
  var dg = -n * F * eRaw; // in Joules
  var dgkJ = dg / 1000;
  var dgEl = document.getElementById('dg-result');
  dgEl.textContent = (dgkJ >= 0 ? '+' : '') + dgkJ.toFixed(1) + ' kJ/mol';
  dgEl.className = 'result-val' + (dgkJ > 0 ? ' negative' : '');
  var logK = (n * eRaw) / 0.0592;
  document.getElementById('logk-result').textContent = logK.toFixed(1);
  var spontEl = document.getElementById('dg-spont');
  if (dgkJ < 0) {
    spontEl.textContent = 'Yes (ΔG° < 0)';
    spontEl.style.color = 'var(--green)';
  } else if (dgkJ > 0) {
    spontEl.textContent = 'No (ΔG° > 0)';
    spontEl.style.color = '#f87171';
  } else {
    spontEl.textContent = 'Equilibrium';
    spontEl.style.color = 'var(--amber)';
  }
}
convertDGE();

// ============================================================
// INTERACTIVE: Nernst Calculator (Section 5)
// ============================================================
function computeNernst() {
  var e0Raw = parseInt(document.getElementById('nernst-e0').value) / 100;
  var n = parseInt(document.getElementById('nernst-n').value);
  var prod = parseInt(document.getElementById('nernst-prod').value) / 100;
  var react = parseInt(document.getElementById('nernst-react').value) / 100;
  document.getElementById('nernst-e0-val').textContent = (e0Raw >= 0 ? '+' : '') + e0Raw.toFixed(2) + ' V';
  document.getElementById('nernst-n-val').textContent = n;
  document.getElementById('nernst-prod-val').textContent = prod.toFixed(2) + ' M';
  document.getElementById('nernst-react-val').textContent = react.toFixed(2) + ' M';
  var Q = prod / react;
  document.getElementById('nernst-q').textContent = Q.toFixed(4);
  var E = e0Raw - (0.0592 / n) * Math.log10(Q);
  var resultEl = document.getElementById('nernst-result');
  resultEl.textContent = (E >= 0 ? '+' : '') + E.toFixed(3) + ' V';
  resultEl.className = 'result-val' + (E < 0 ? ' negative' : '');
}
computeNernst();

// ============================================================
// INTERACTIVE: Faraday Calculator (Section 6)
// ============================================================
function computeFaraday() {
  var I = parseInt(document.getElementById('far-I').value) / 100;
  var tMin = parseInt(document.getElementById('far-t').value);
  var M = parseInt(document.getElementById('far-M').value);
  var z = parseInt(document.getElementById('far-z').value);
  document.getElementById('far-I-val').textContent = I.toFixed(2) + ' A';
  document.getElementById('far-t-val').textContent = tMin + ' min';
  document.getElementById('far-M-val').textContent = M + ' g/mol';
  document.getElementById('far-z-val').textContent = z;
  var F = 96485;
  var tSec = tMin * 60;
  var q = I * tSec;
  var m = (M * I * tSec) / (z * F);
  document.getElementById('far-q').textContent = q.toFixed(1);
  document.getElementById('far-m').textContent = m.toFixed(4);
}
computeFaraday();

// ============================================================
// INIT
// ============================================================
updateProgress();

// Auto-open section 1
(function() {
  var firstCard = document.querySelector('.section-card[data-section="1"]');
  if (firstCard) {
    firstCard.classList.add('open');
    markComplete(1);
  }
})();
</script>
</body>
</html>
