<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lesson 28: Atomic & Nuclear Physics</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #1e2128;
  --bg-card: #262a33;
  --bg-card-hover: #2c313c;
  --bg-input: #1a1d24;
  --border: #363b47;
  --text: #e2e4e9;
  --text-dim: #9ca3af;
  --text-bright: #fff;
  --indigo: #6366f1;
  --green: #22c55e;
  --pink: #ec4899;
  --amber: #f59e0b;
  --indigo-dim: rgba(99,102,241,0.15);
  --green-dim: rgba(34,197,94,0.15);
  --pink-dim: rgba(236,72,153,0.15);
  --amber-dim: rgba(245,158,11,0.15);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 14px;
  line-height: 1.7;
  min-height: 100vh;
}

/* TOP BAR */
.top-bar {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
  padding: 14px 24px 0;
  backdrop-filter: blur(8px);
}
.top-bar-inner {
  max-width: 900px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}
.top-bar h1 {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-bright);
  white-space: nowrap;
}
.top-bar h1 .lesson-num {
  color: var(--indigo);
}
.progress-wrap {
  flex: 1;
  min-width: 160px;
}
.progress-track {
  height: 6px;
  background: var(--bg-input);
  border-radius: 99px;
  overflow: hidden;
  margin-bottom: 4px;
}
.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--indigo), var(--green));
  border-radius: 99px;
  width: 0%;
  transition: width 0.5s cubic-bezier(.4,0,.2,1);
}
.progress-label {
  font-size: 11px;
  color: var(--text-dim);
}
.progress-bar-bottom {
  height: 3px;
  background: transparent;
}

/* CONTENT */
.content {
  max-width: 900px;
  margin: 0 auto;
  padding: 24px;
}

/* SECTION CARDS */
.section-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  margin-bottom: 20px;
  overflow: hidden;
  transition: border-color 0.3s cubic-bezier(.4,0,.2,1);
}
.section-card.completed {
  border-color: var(--green);
}
.section-card.completed .section-header {
  background: rgba(34,197,94,0.05);
}
.section-header {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 16px 20px;
  cursor: pointer;
  user-select: none;
  transition: background 0.3s cubic-bezier(.4,0,.2,1);
}
.section-header:hover { background: var(--bg-card-hover); }
.section-num {
  min-width: 32px;
  height: 32px;
  border-radius: 8px;
  background: var(--indigo-dim);
  color: var(--indigo);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 13px;
  flex-shrink: 0;
}
.section-card.completed .section-num {
  background: var(--green-dim);
  color: var(--green);
}
.section-title {
  flex: 1;
  font-weight: 600;
  font-size: 14px;
  color: var(--text-bright);
}
.chevron {
  width: 18px;
  height: 18px;
  color: var(--text-dim);
  transition: transform 0.45s cubic-bezier(.34,1.56,.64,1);
  flex-shrink: 0;
}
.section-card.open .chevron { transform: rotate(180deg); }
.section-body {
  display: none;
  padding: 0 20px 20px;
  border-top: 1px solid var(--border);
}
.section-card.open .section-body { display: block; }

/* FORMULA BOXES */
.formula-box {
  background: var(--indigo-dim);
  border: 1px solid rgba(99,102,241,0.35);
  border-radius: 10px;
  padding: 14px 18px;
  margin: 14px 0;
  font-size: 13px;
  color: var(--text-bright);
}
.formula-box .label {
  font-size: 11px;
  color: var(--indigo);
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin-bottom: 6px;
}
.formula-box.green {
  background: var(--green-dim);
  border-color: rgba(34,197,94,0.35);
}
.formula-box.green .label { color: var(--green); }
.formula-box.pink {
  background: var(--pink-dim);
  border-color: rgba(236,72,153,0.35);
}
.formula-box.pink .label { color: var(--pink); }
.formula-box.amber {
  background: var(--amber-dim);
  border-color: rgba(245,158,11,0.35);
}
.formula-box.amber .label { color: var(--amber); }

/* KEY POINTS */
.key-point {
  border-left: 3px solid var(--amber);
  background: var(--amber-dim);
  border-radius: 0 8px 8px 0;
  padding: 10px 14px;
  margin: 10px 0;
  font-size: 13px;
  color: var(--text);
}

/* PRACTICE PROBLEMS */
.problems-title {
  font-size: 12px;
  font-weight: 700;
  color: var(--indigo);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin: 22px 0 12px;
  padding-top: 16px;
  border-top: 1px solid var(--border);
}
.problem {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  margin-bottom: 12px;
}
.problem p {
  font-size: 13px;
  margin-bottom: 10px;
  color: var(--text);
}
.problem-row {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}
input[type="number"], input[type="text"] {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text-bright);
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px;
  padding: 7px 12px;
  width: 140px;
  transition: border-color 0.3s cubic-bezier(.4,0,.2,1);
  outline: none;
}
input:focus { border-color: var(--indigo); }
.btn {
  background: var(--indigo);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 7px 16px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.2s, transform 0.15s;
}
.btn:hover { opacity: 0.88; transform: translateY(-1px); }
.btn:active { transform: scale(0.97); }
.btn.green { background: var(--green); color: #111; }
.btn.amber { background: var(--amber); color: #111; }
.btn.pink { background: var(--pink); }
.btn.sm { padding: 5px 12px; font-size: 12px; }
.feedback {
  font-size: 12px;
  margin-top: 8px;
  padding: 7px 12px;
  border-radius: 7px;
  display: none;
}
.feedback.correct {
  display: block;
  background: var(--green-dim);
  color: var(--green);
  border: 1px solid rgba(34,197,94,0.3);
  animation: springPop 0.4s cubic-bezier(.34,1.56,.64,1);
}
.feedback.incorrect {
  display: block;
  background: var(--pink-dim);
  color: var(--pink);
  border: 1px solid rgba(236,72,153,0.3);
  animation: shake 0.4s ease;
}
@keyframes springPop {
  0%   { transform: scale(1); }
  40%  { transform: scale(1.15); }
  70%  { transform: scale(0.95); }
  100% { transform: scale(1); }
}
@keyframes shake {
  0%,100% { transform: translateX(0); }
  20%     { transform: translateX(-6px); }
  40%     { transform: translateX(6px); }
  60%     { transform: translateX(-4px); }
  80%     { transform: translateX(4px); }
}

/* MC OPTIONS */
.mc-options { display: flex; flex-direction: column; gap: 6px; margin: 8px 0; }
.mc-btn {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px;
  padding: 8px 14px;
  cursor: pointer;
  text-align: left;
  transition: background 0.2s, border-color 0.2s;
}
.mc-btn:hover { background: var(--bg-card-hover); border-color: var(--indigo); }
.mc-btn.selected-correct { background: var(--green-dim); border-color: var(--green); color: var(--green); }
.mc-btn.selected-incorrect { background: var(--pink-dim); border-color: var(--pink); color: var(--pink); }

/* INTERACTIVE TOOLS */
.interactive-box {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 18px;
  margin: 16px 0;
}
.interactive-box h4 {
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--indigo);
  margin-bottom: 14px;
}
svg text { font-family: 'JetBrains Mono', monospace; }

/* ENERGY DIAGRAM */
#energy-svg { width: 100%; border-radius: 8px; background: #16191f; }
.energy-controls { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }

/* DECAY SIMULATOR */
.decay-inputs { display: flex; gap: 10px; flex-wrap: wrap; align-items: flex-end; margin-bottom: 14px; }
.decay-inputs label { font-size: 12px; color: var(--text-dim); display: flex; flex-direction: column; gap: 4px; }
#decay-svg { width: 100%; background: #16191f; border-radius: 8px; }
.decay-info { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 10px; }
.decay-stat { font-size: 12px; color: var(--text-dim); }
.decay-stat span { color: var(--text-bright); font-weight: 600; }

/* DECAY CHAIN */
.decay-chain-display {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin: 12px 0;
}
.nucleus-badge {
  background: var(--indigo-dim);
  border: 1px solid rgba(99,102,241,0.4);
  border-radius: 8px;
  padding: 8px 14px;
  text-align: center;
  font-size: 13px;
  min-width: 80px;
}
.nucleus-badge .mass { font-size: 18px; font-weight: 700; color: var(--text-bright); }
.nucleus-badge .info { font-size: 11px; color: var(--text-dim); }
.decay-arrow { font-size: 20px; color: var(--text-dim); }
.decay-chain-btns { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }

/* BINDING ENERGY */
.be-inputs { display: flex; gap: 10px; flex-wrap: wrap; align-items: flex-end; margin-bottom: 12px; }
.be-inputs label { font-size: 12px; color: var(--text-dim); display: flex; flex-direction: column; gap: 4px; }
#be-svg { width: 100%; background: #16191f; border-radius: 8px; }
.be-result { font-size: 13px; margin-top: 10px; color: var(--text); min-height: 20px; }

/* QUIZ */
.quiz-section {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 22px;
  margin-top: 24px;
}
.quiz-section h2 {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-bright);
  margin-bottom: 4px;
}
.quiz-section .subtitle {
  font-size: 12px;
  color: var(--text-dim);
  margin-bottom: 20px;
}
.quiz-question {
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  margin-bottom: 12px;
}
.quiz-question p {
  font-size: 13px;
  margin-bottom: 10px;
  color: var(--text-bright);
}
.quiz-question .q-num {
  font-size: 11px;
  color: var(--indigo);
  font-weight: 700;
  margin-bottom: 4px;
}
.score-display {
  text-align: center;
  padding: 20px;
  font-size: 28px;
  font-weight: 700;
  color: var(--text-bright);
  display: none;
}
.score-display .score-label { font-size: 13px; color: var(--text-dim); font-weight: 400; margin-top: 4px; }
#submit-quiz {
  display: block;
  width: 100%;
  margin-top: 16px;
}

/* TABLE */
table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 12px; }
th { background: var(--bg-input); color: var(--indigo); padding: 8px 12px; text-align: left; font-weight: 600; border-bottom: 1px solid var(--border); }
td { padding: 7px 12px; border-bottom: 1px solid rgba(54,59,71,0.5); color: var(--text); }
tr:last-child td { border-bottom: none; }
tr:hover td { background: rgba(255,255,255,0.02); }

/* SPACING */
.mt { margin-top: 14px; }
.mb { margin-bottom: 14px; }
p + p { margin-top: 8px; }
.section-body > p { margin-top: 12px; }

/* RESPONSIVE */
@media (max-width: 640px) {
  .content { padding: 14px; }
  .top-bar { padding: 10px 14px 0; }
  .top-bar-inner { gap: 10px; }
  .top-bar h1 { font-size: 13px; }
  input[type="number"], input[type="text"] { width: 110px; }
  .decay-chain-display { gap: 4px; }
  .nucleus-badge { padding: 6px 10px; min-width: 65px; }
  .nucleus-badge .mass { font-size: 15px; }
}
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="top-bar">
  <div class="top-bar-inner">
    <h1><span class="lesson-num">28</span> — Atomic &amp; Nuclear Physics</h1>
    <div class="progress-wrap">
      <div class="progress-track"><div class="progress-fill" id="progressFill"></div></div>
      <div class="progress-label" id="progressLabel">0 / 5 sections</div>
    </div>
  </div>
  <div class="progress-bar-bottom"></div>
</div>

<div class="content">

<!-- ======== SECTION 1: BOHR MODEL ======== -->
<div class="section-card open" id="sec1" data-section="1">
  <div class="section-header" onclick="toggleSection('sec1')">
    <div class="section-num">1</div>
    <div class="section-title">Bohr Model of Hydrogen</div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
  </div>
  <div class="section-body">
    <p>Niels Bohr (1913) proposed that electrons orbit the nucleus only in specific <strong style="color:var(--indigo)">quantized orbits</strong> — discrete energy levels where no energy is radiated. Electrons jump between levels by absorbing or emitting photons.</p>

    <div class="formula-box">
      <div class="label">Quantized Angular Momentum</div>
      L = nℏ &nbsp;&nbsp; (n = 1, 2, 3, ... principal quantum number)<br>
      ℏ = h / 2π = 1.055 × 10⁻³⁴ J·s
    </div>

    <div class="formula-box green">
      <div class="label">Energy Levels of Hydrogen</div>
      Eₙ = −13.6 eV / n² &nbsp;&nbsp; (n = 1, 2, 3, ...)<br>
      Ground state: E₁ = −13.6 eV<br>
      First excited: E₂ = −3.40 eV<br>
      Second excited: E₃ = −1.51 eV
    </div>

    <div class="formula-box pink">
      <div class="label">Ionization Energy</div>
      Eᵢₒₙ = 13.6 eV (from ground state, n=1 → n=∞)
    </div>

    <div class="key-point">When an electron drops from level nᵢ to nf (nf &lt; nᵢ), a photon is <em>emitted</em> with energy ΔE = Eᵢ − Ef. When absorbing a photon, the electron jumps to a higher level.</div>

    <table>
      <tr><th>n</th><th>Energy (eV)</th><th>Name</th></tr>
      <tr><td>1</td><td>−13.60</td><td>Ground state</td></tr>
      <tr><td>2</td><td>−3.40</td><td>1st excited</td></tr>
      <tr><td>3</td><td>−1.51</td><td>2nd excited</td></tr>
      <tr><td>4</td><td>−0.850</td><td>3rd excited</td></tr>
      <tr><td>5</td><td>−0.544</td><td>4th excited</td></tr>
      <tr><td>6</td><td>−0.378</td><td>5th excited</td></tr>
      <tr><td>∞</td><td>0</td><td>Ionized</td></tr>
    </table>

    <!-- INTERACTIVE: HYDROGEN ENERGY DIAGRAM -->
    <div class="interactive-box">
      <h4>Interactive Energy Level Diagram</h4>
      <p style="font-size:12px;color:var(--text-dim);margin-bottom:10px;">Select a starting level (nᵢ) then an ending level (nf &lt; nᵢ) to see the transition.</p>
      <svg id="energy-svg" height="300" viewBox="0 0 560 300"></svg>
      <div class="energy-controls" id="energy-controls"></div>
      <div id="transition-info" style="margin-top:10px;font-size:13px;color:var(--text-bright);min-height:22px;"></div>
    </div>

    <div class="problems-title">Practice Problems</div>

    <div class="problem">
      <p><strong>P1.</strong> What is the energy of a photon emitted when an electron in hydrogen drops from n=3 to n=1? Give your answer in eV (to 2 decimal places).</p>
      <div class="problem-row">
        <input type="number" id="p1_1" placeholder="eV" step="0.01">
        <button class="btn sm" onclick="checkNum('p1_1', 12.09, 0.05, 'f1_1')">Check</button>
      </div>
      <div class="feedback" id="f1_1"></div>
    </div>

    <div class="problem">
      <p><strong>P2.</strong> An electron absorbs a photon and jumps from n=1 to n=4. What is the energy of the photon (eV, 3 sig figs)?</p>
      <div class="problem-row">
        <input type="number" id="p1_2" placeholder="eV" step="0.001">
        <button class="btn sm" onclick="checkNum('p1_2', 12.75, 0.05, 'f1_2')">Check</button>
      </div>
      <div class="feedback" id="f1_2"></div>
    </div>

    <div class="problem">
      <p><strong>P3.</strong> What is the ionization energy of a hydrogen atom in the n=3 state? (eV, 2 decimal places)</p>
      <div class="problem-row">
        <input type="number" id="p1_3" placeholder="eV" step="0.01">
        <button class="btn sm" onclick="checkNum('p1_3', 1.51, 0.03, 'f1_3')">Check</button>
      </div>
      <div class="feedback" id="f1_3"></div>
    </div>

    <div class="problem">
      <p><strong>P4.</strong> What is the wavelength of the photon emitted in the n=4 → n=2 transition? (nm, 1 decimal)</p>
      <div class="problem-row">
        <input type="number" id="p1_4" placeholder="nm" step="0.1">
        <button class="btn sm" onclick="checkNum('p1_4', 486.1, 2, 'f1_4')">Check</button>
      </div>
      <div class="feedback" id="f1_4"></div>
    </div>

    <div class="problem">
      <p><strong>P5.</strong> How many distinct photon energies can be emitted if electrons in a hydrogen sample are initially at n=4 and cascade down?</p>
      <div class="mc-options" id="mc1_5">
        <button class="mc-btn" onclick="checkMC(this,'mc1_5',4,'f1_5')">A) 3</button>
        <button class="mc-btn" onclick="checkMC(this,'mc1_5',4,'f1_5')">B) 4</button>
        <button class="mc-btn" onclick="checkMC(this,'mc1_5',4,'f1_5')">C) 6</button>
        <button class="mc-btn" onclick="checkMC(this,'mc1_5',4,'f1_5')">D) 12</button>
      </div>
      <div class="feedback" id="f1_5"></div>
    </div>

  </div>
</div>

<!-- ======== SECTION 2: HYDROGEN SPECTRUM ======== -->
<div class="section-card" id="sec2" data-section="2">
  <div class="section-header" onclick="toggleSection('sec2')">
    <div class="section-num">2</div>
    <div class="section-title">Hydrogen Spectrum &amp; Spectral Series</div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
  </div>
  <div class="section-body">
    <p>Electron transitions produce photons at specific wavelengths, forming <strong style="color:var(--indigo)">spectral series</strong> grouped by their final quantum number nf.</p>

    <div class="formula-box">
      <div class="label">Rydberg Formula</div>
      1/λ = R_H (1/nf² − 1/nᵢ²) &nbsp;&nbsp; nᵢ > nf<br>
      R_H = 1.097 × 10⁷ m⁻¹ (Rydberg constant)<br><br>
      Photon energy: ΔE = hf = hc/λ = Eᵢ − Ef<br>
      h = 6.626 × 10⁻³⁴ J·s &nbsp;&nbsp; c = 3.00 × 10⁸ m/s
    </div>

    <table>
      <tr><th>Series</th><th>nf</th><th>Region</th><th>nᵢ values</th></tr>
      <tr><td style="color:var(--indigo)">Lyman</td><td>1</td><td>Ultraviolet</td><td>2, 3, 4, ...</td></tr>
      <tr><td style="color:var(--green)">Balmer</td><td>2</td><td>Visible (+ near UV)</td><td>3, 4, 5, ...</td></tr>
      <tr><td style="color:var(--amber)">Paschen</td><td>3</td><td>Infrared</td><td>4, 5, 6, ...</td></tr>
      <tr><td style="color:var(--pink)">Brackett</td><td>4</td><td>Infrared</td><td>5, 6, 7, ...</td></tr>
    </table>

    <div class="key-point">Balmer series (nf = 2): The first four lines are visible — H-alpha (656 nm, red), H-beta (486 nm, blue-green), H-gamma (434 nm, violet), H-delta (410 nm, violet).</div>

    <div class="formula-box amber">
      <div class="label">Photon Wavelength from Energy</div>
      λ = hc / ΔE<br>
      Using eV: λ (nm) = 1240 eV·nm / ΔE (eV)
    </div>

    <div class="problems-title">Practice Problems</div>

    <div class="problem">
      <p><strong>P1.</strong> The n=5 → n=2 transition: what series is this?</p>
      <div class="mc-options" id="mc2_1">
        <button class="mc-btn" onclick="checkMC(this,'mc2_1',2,'f2_1')">A) Lyman</button>
        <button class="mc-btn" onclick="checkMC(this,'mc2_1',2,'f2_1')">B) Balmer</button>
        <button class="mc-btn" onclick="checkMC(this,'mc2_1',2,'f2_1')">C) Paschen</button>
        <button class="mc-btn" onclick="checkMC(this,'mc2_1',2,'f2_1')">D) Brackett</button>
      </div>
      <div class="feedback" id="f2_1"></div>
    </div>

    <div class="problem">
      <p><strong>P2.</strong> Using the Rydberg formula, what is the wavelength (nm) of the Lyman-alpha line (n=2 → n=1)? R_H = 1.097 × 10⁷ m⁻¹. Round to nearest whole nm.</p>
      <div class="problem-row">
        <input type="number" id="p2_2" placeholder="nm" step="1">
        <button class="btn sm" onclick="checkNum('p2_2', 122, 2, 'f2_2')">Check</button>
      </div>
      <div class="feedback" id="f2_2"></div>
    </div>

    <div class="problem">
      <p><strong>P3.</strong> A photon has wavelength 656 nm. What is its energy in eV? (Use λ(nm) = 1240/ΔE, 2 decimal places)</p>
      <div class="problem-row">
        <input type="number" id="p2_3" placeholder="eV" step="0.01">
        <button class="btn sm" onclick="checkNum('p2_3', 1.89, 0.05, 'f2_3')">Check</button>
      </div>
      <div class="feedback" id="f2_3"></div>
    </div>

    <div class="problem">
      <p><strong>P4.</strong> The n=4 → n=3 transition falls in which spectral series?</p>
      <div class="mc-options" id="mc2_4">
        <button class="mc-btn" onclick="checkMC(this,'mc2_4',3,'f2_4')">A) Lyman (UV)</button>
        <button class="mc-btn" onclick="checkMC(this,'mc2_4',3,'f2_4')">B) Balmer (visible)</button>
        <button class="mc-btn" onclick="checkMC(this,'mc2_4',3,'f2_4')">C) Paschen (IR)</button>
        <button class="mc-btn" onclick="checkMC(this,'mc2_4',3,'f2_4')">D) Brackett (IR)</button>
      </div>
      <div class="feedback" id="f2_4"></div>
    </div>

    <div class="problem">
      <p><strong>P5.</strong> What is the frequency (in THz = 10¹² Hz) of a photon with energy 10.2 eV? (h = 4.136 × 10⁻¹⁵ eV·s, round to nearest whole THz)</p>
      <div class="problem-row">
        <input type="number" id="p2_5" placeholder="THz" step="1">
        <button class="btn sm" onclick="checkNum('p2_5', 2466, 30, 'f2_5')">Check</button>
      </div>
      <div class="feedback" id="f2_5"></div>
    </div>

  </div>
</div>

<!-- ======== SECTION 3: NUCLEAR STRUCTURE ======== -->
<div class="section-card" id="sec3" data-section="3">
  <div class="section-header" onclick="toggleSection('sec3')">
    <div class="section-num">3</div>
    <div class="section-title">Nuclear Structure &amp; Binding Energy</div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
  </div>
  <div class="section-body">
    <p>The nucleus contains <strong style="color:var(--indigo)">protons</strong> (charge +e) and <strong style="color:var(--green)">neutrons</strong> (neutral), collectively called <strong>nucleons</strong>, held together by the strong nuclear force.</p>

    <div class="formula-box">
      <div class="label">Nuclear Notation &amp; Quantities</div>
      ᴬ_Z X &nbsp; → &nbsp; Z = atomic number (protons), A = mass number (total nucleons)<br>
      Neutron number: N = A − Z<br>
      <strong>Isotopes</strong>: same Z, different A (e.g., ¹H, ²H, ³H)
    </div>

    <div class="formula-box amber">
      <div class="label">Nuclear Radius</div>
      r = r₀ · A^(1/3) &nbsp;&nbsp; r₀ = 1.2 × 10⁻¹⁵ m = 1.2 fm<br>
      Nucleons are approximately uniformly packed.
    </div>

    <div class="formula-box green">
      <div class="label">Mass Defect &amp; Binding Energy</div>
      Δm = Z·mₚ + N·mₙ − M_nucleus<br>
      E_b = Δm · c² &nbsp;&nbsp; (binding energy)<br>
      mₚ = 1.007276 u &nbsp;&nbsp; mₙ = 1.008665 u &nbsp;&nbsp; 1 u = 931.5 MeV/c²<br>
      <em>Binding energy per nucleon</em>: E_b / A (peaks near Fe-56 at ~8.8 MeV/nucleon)
    </div>

    <div class="key-point">The binding energy is the energy required to completely disassemble a nucleus into individual protons and neutrons. Higher binding energy per nucleon = more stable nucleus.</div>

    <!-- MASS DEFECT CALCULATOR -->
    <div class="interactive-box">
      <h4>Binding Energy Calculator</h4>
      <p style="font-size:12px;color:var(--text-dim);margin-bottom:12px;">Select a nucleus or enter Z and A. Masses are tabulated values.</p>
      <div class="be-inputs">
        <label>Preset nucleus
          <select id="be-preset" onchange="applyBePreset()" style="background:var(--bg-card);border:1px solid var(--border);border-radius:8px;color:var(--text);font-family:'JetBrains Mono',monospace;font-size:13px;padding:7px 10px;">
            <option value="">-- select --</option>
            <option value="2,4,4.002602">He-4</option>
            <option value="6,12,12.000000">C-12</option>
            <option value="8,16,15.994915">O-16</option>
            <option value="26,56,55.934940">Fe-56</option>
            <option value="82,208,207.976652">Pb-208</option>
            <option value="92,235,235.043930">U-235</option>
            <option value="92,238,238.050788">U-238</option>
          </select>
        </label>
        <label>Z (protons)<input type="number" id="be-Z" placeholder="Z" min="1" max="120" style="width:80px"></label>
        <label>A (mass #)<input type="number" id="be-A" placeholder="A" min="1" max="300" style="width:80px"></label>
        <label>Atomic mass (u)<input type="number" id="be-mass" placeholder="u" step="0.000001" style="width:130px"></label>
        <button class="btn" onclick="calcBindingEnergy()">Calculate</button>
      </div>
      <div class="be-result" id="be-result"></div>
      <svg id="be-svg" height="160" viewBox="0 0 560 160"></svg>
    </div>

    <div class="problems-title">Practice Problems</div>

    <div class="problem">
      <p><strong>P1.</strong> How many neutrons are in ²³⁸₉₂U?</p>
      <div class="problem-row">
        <input type="number" id="p3_1" placeholder="neutrons" step="1">
        <button class="btn sm" onclick="checkNum('p3_1', 146, 0, 'f3_1')">Check</button>
      </div>
      <div class="feedback" id="f3_1"></div>
    </div>

    <div class="problem">
      <p><strong>P2.</strong> What is the nuclear radius of Fe-56 (A=56, r₀=1.2 fm)? Give answer in fm to 2 decimal places.</p>
      <div class="problem-row">
        <input type="number" id="p3_2" placeholder="fm" step="0.01">
        <button class="btn sm" onclick="checkNum('p3_2', 4.59, 0.05, 'f3_2')">Check</button>
      </div>
      <div class="feedback" id="f3_2"></div>
    </div>

    <div class="problem">
      <p><strong>P3.</strong> He-4 has an atomic mass of 4.002602 u. Proton mass = 1.007276 u, neutron = 1.008665 u. What is the mass defect Δm in u? (4 decimal places)</p>
      <div class="problem-row">
        <input type="number" id="p3_3" placeholder="u" step="0.0001">
        <button class="btn sm" onclick="checkNum('p3_3', 0.0304, 0.0005, 'f3_3')">Check</button>
      </div>
      <div class="feedback" id="f3_3"></div>
    </div>

    <div class="problem">
      <p><strong>P4.</strong> Using Δm = 0.0304 u for He-4, what is the binding energy in MeV? (1 u = 931.5 MeV/c², round to 1 decimal)</p>
      <div class="problem-row">
        <input type="number" id="p3_4" placeholder="MeV" step="0.1">
        <button class="btn sm" onclick="checkNum('p3_4', 28.3, 0.3, 'f3_4')">Check</button>
      </div>
      <div class="feedback" id="f3_4"></div>
    </div>

    <div class="problem">
      <p><strong>P5.</strong> Which nucleus has the highest binding energy per nucleon (most stable)?</p>
      <div class="mc-options" id="mc3_5">
        <button class="mc-btn" onclick="checkMC(this,'mc3_5',2,'f3_5')">A) H-1</button>
        <button class="mc-btn" onclick="checkMC(this,'mc3_5',2,'f3_5')">B) Fe-56</button>
        <button class="mc-btn" onclick="checkMC(this,'mc3_5',2,'f3_5')">C) U-238</button>
        <button class="mc-btn" onclick="checkMC(this,'mc3_5',2,'f3_5')">D) He-4</button>
      </div>
      <div class="feedback" id="f3_5"></div>
    </div>

  </div>
</div>

<!-- ======== SECTION 4: RADIOACTIVE DECAY ======== -->
<div class="section-card" id="sec4" data-section="4">
  <div class="section-header" onclick="toggleSection('sec4')">
    <div class="section-num">4</div>
    <div class="section-title">Radioactive Decay Types</div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
  </div>
  <div class="section-body">
    <p>Unstable nuclei spontaneously decay by emitting particles or radiation, transforming into different nuclei. Conservation of mass number A, atomic number Z, and energy apply in all decays.</p>

    <div class="formula-box">
      <div class="label">Alpha Decay (α)</div>
      Emits ⁴₂He nucleus. Z→Z−2, A→A−4<br>
      ᴬ_Z X → ᴬ⁻⁴_Z₋₂ Y + ⁴₂He<br>
      Example: ²³⁸₉₂U → ²³⁴₉₀Th + ⁴₂He
    </div>

    <div class="formula-box green">
      <div class="label">Beta-Minus Decay (β⁻)</div>
      Neutron → proton + electron + antineutrino<br>
      Z→Z+1, A unchanged<br>
      ᴬ_Z X → ᴬ_Z₊₁ Y + e⁻ + ν̄ₑ<br>
      Example: ¹⁴₆C → ¹⁴₇N + e⁻ + ν̄ₑ
    </div>

    <div class="formula-box pink">
      <div class="label">Beta-Plus Decay (β⁺) &amp; Electron Capture</div>
      β⁺: proton → neutron + positron + neutrino &nbsp; Z→Z−1<br>
      EC: p + e⁻ → n + νₑ &nbsp;&nbsp; Z→Z−1, A unchanged<br>
      Example: ¹¹₆C → ¹¹₅B + e⁺ + νₑ
    </div>

    <div class="formula-box amber">
      <div class="label">Gamma Decay (γ)</div>
      Excited nucleus emits high-energy photon.<br>
      Z and A unchanged — only energy state changes.<br>
      Often follows alpha or beta decay.
    </div>

    <div class="key-point">In every nuclear decay: total charge (Z), total nucleon number (A), energy, and momentum are conserved.</div>

    <!-- DECAY CHAIN VISUALIZER -->
    <div class="interactive-box">
      <h4>Nuclear Decay Chain Visualizer</h4>
      <p style="font-size:12px;color:var(--text-dim);margin-bottom:10px;">Start with a nucleus and apply decay types step by step.</p>
      <div class="decay-chain-display" id="decay-chain-display">
        <!-- filled by JS -->
      </div>
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px;">
        <label style="font-size:12px;color:var(--text-dim)">Start Z: <input type="number" id="dc-Z" value="92" min="1" max="118" style="width:70px;margin-left:6px"></label>
        <label style="font-size:12px;color:var(--text-dim)">A: <input type="number" id="dc-A" value="238" min="1" max="300" style="width:80px;margin-left:6px"></label>
        <label style="font-size:12px;color:var(--text-dim)">Symbol: <input type="text" id="dc-sym" value="U" style="width:60px;margin-left:6px"></label>
        <button class="btn sm" onclick="initDecayChain()">Set</button>
      </div>
      <div class="decay-chain-btns">
        <button class="btn amber" onclick="applyDecay('alpha')">Alpha Decay (A−4, Z−2)</button>
        <button class="btn green" onclick="applyDecay('beta-')">Beta⁻ Decay (Z+1)</button>
        <button class="btn pink" onclick="applyDecay('beta+')">Beta⁺ Decay (Z−1)</button>
        <button class="btn sm" onclick="resetDecayChain()">Reset</button>
      </div>
    </div>

    <div class="problems-title">Practice Problems</div>

    <div class="problem">
      <p><strong>P1.</strong> ²²⁶₈₈Ra undergoes alpha decay. What is the mass number A of the daughter nucleus?</p>
      <div class="problem-row">
        <input type="number" id="p4_1" placeholder="A" step="1">
        <button class="btn sm" onclick="checkNum('p4_1', 222, 0, 'f4_1')">Check</button>
      </div>
      <div class="feedback" id="f4_1"></div>
    </div>

    <div class="problem">
      <p><strong>P2.</strong> ²²⁶₈₈Ra undergoes alpha decay. What is the atomic number Z of the daughter nucleus?</p>
      <div class="problem-row">
        <input type="number" id="p4_2" placeholder="Z" step="1">
        <button class="btn sm" onclick="checkNum('p4_2', 86, 0, 'f4_2')">Check</button>
      </div>
      <div class="feedback" id="f4_2"></div>
    </div>

    <div class="problem">
      <p><strong>P3.</strong> ³²₁₅P undergoes beta-minus decay. What is the atomic number Z of the daughter?</p>
      <div class="problem-row">
        <input type="number" id="p4_3" placeholder="Z" step="1">
        <button class="btn sm" onclick="checkNum('p4_3', 16, 0, 'f4_3')">Check</button>
      </div>
      <div class="feedback" id="f4_3"></div>
    </div>

    <div class="problem">
      <p><strong>P4.</strong> Which decay type does NOT change the atomic number Z?</p>
      <div class="mc-options" id="mc4_4">
        <button class="mc-btn" onclick="checkMC(this,'mc4_4',3,'f4_4')">A) Alpha decay</button>
        <button class="mc-btn" onclick="checkMC(this,'mc4_4',3,'f4_4')">B) Beta-minus decay</button>
        <button class="mc-btn" onclick="checkMC(this,'mc4_4',3,'f4_4')">C) Gamma decay</button>
        <button class="mc-btn" onclick="checkMC(this,'mc4_4',3,'f4_4')">D) Beta-plus decay</button>
      </div>
      <div class="feedback" id="f4_4"></div>
    </div>

    <div class="problem">
      <p><strong>P5.</strong> ²¹⁰₈₃Bi undergoes β⁻ decay. What element (atomic number) is produced?</p>
      <div class="problem-row">
        <input type="number" id="p4_5" placeholder="Z" step="1">
        <button class="btn sm" onclick="checkNum('p4_5', 84, 0, 'f4_5')">Check</button>
      </div>
      <div class="feedback" id="f4_5"></div>
    </div>

  </div>
</div>

<!-- ======== SECTION 5: DECAY LAW ======== -->
<div class="section-card" id="sec5" data-section="5">
  <div class="section-header" onclick="toggleSection('sec5')">
    <div class="section-num">5</div>
    <div class="section-title">Radioactive Decay Law &amp; Applications</div>
    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
  </div>
  <div class="section-body">
    <p>Radioactive decay is a statistical process — any single nucleus has a fixed probability of decaying per unit time, described by the <strong style="color:var(--indigo)">decay constant λ</strong>.</p>

    <div class="formula-box">
      <div class="label">Decay Law</div>
      N(t) = N₀ e^(−λt) &nbsp;&nbsp; (N₀ = initial count, λ = decay constant)<br>
      Activity: A(t) = λ N(t) = A₀ e^(−λt) &nbsp;&nbsp; [units: Becquerel = decays/s]<br>
      After n half-lives: N = N₀ / 2ⁿ
    </div>

    <div class="formula-box green">
      <div class="label">Half-Life</div>
      t₁/₂ = ln(2) / λ = 0.6931 / λ<br>
      λ = 0.6931 / t₁/₂<br>
      Time to reach fraction f of N₀: t = −ln(f)/λ = t₁/₂ · log₂(1/f)
    </div>

    <div class="formula-box pink">
      <div class="label">Radiocarbon Dating (C-14)</div>
      t₁/₂ = 5730 yr &nbsp;&nbsp; λ = 1.21 × 10⁻⁴ yr⁻¹<br>
      Age: t = −ln(N/N₀) / λ = t₁/₂ · ln(N₀/N) / ln(2)<br>
      Useful range: ~300 – 50,000 years
    </div>

    <div class="formula-box amber">
      <div class="label">Nuclear Fission &amp; Fusion</div>
      Fission: heavy nucleus splits (e.g., ²³⁵U + n → Ba + Kr + ~3n + energy)<br>
      Fusion: light nuclei combine (e.g., ²H + ³H → ⁴He + n + 17.6 MeV)<br>
      Energy from Einstein: E = Δm·c² (mass defect → energy)
    </div>

    <div class="key-point">Fission releases ~200 MeV per event (heavy nuclei moving down binding energy curve toward Fe). Fusion releases ~17 MeV per event but from extremely light nuclei — the energy per unit mass is much higher.</div>

    <!-- DECAY SIMULATOR -->
    <div class="interactive-box">
      <h4>Radioactive Decay Simulator</h4>
      <div class="decay-inputs">
        <label>N₀ (initial atoms)
          <input type="number" id="sim-N0" value="1000" min="10" max="10000" style="width:100px">
        </label>
        <label>Half-life (any unit)
          <input type="number" id="sim-hl" value="5" min="1" max="100" style="width:80px">
        </label>
        <label>Show up to (# half-lives)
          <input type="number" id="sim-nhl" value="6" min="2" max="12" style="width:70px">
        </label>
        <button class="btn green" onclick="runDecaySim()">Simulate</button>
      </div>
      <svg id="decay-svg" height="180" viewBox="0 0 560 180"></svg>
      <div class="decay-info" id="decay-info"></div>
      <div style="margin-top:10px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
        <label style="font-size:12px;color:var(--text-dim)">Query time (in your unit):
          <input type="number" id="sim-qt" value="10" style="width:80px;margin:0 6px">
        </label>
        <button class="btn sm" onclick="queryDecay()">Get N(t)</button>
        <span id="sim-query-result" style="font-size:13px;color:var(--text-bright)"></span>
      </div>
    </div>

    <div class="problems-title">Practice Problems</div>

    <div class="problem">
      <p><strong>P1.</strong> A sample has N₀ = 8000 atoms with t₁/₂ = 10 days. How many atoms remain after 30 days?</p>
      <div class="problem-row">
        <input type="number" id="p5_1" placeholder="atoms" step="1">
        <button class="btn sm" onclick="checkNum('p5_1', 1000, 10, 'f5_1')">Check</button>
      </div>
      <div class="feedback" id="f5_1"></div>
    </div>

    <div class="problem">
      <p><strong>P2.</strong> The decay constant of a substance is λ = 0.050 s⁻¹. What is the half-life in seconds? (2 decimal places)</p>
      <div class="problem-row">
        <input type="number" id="p5_2" placeholder="s" step="0.01">
        <button class="btn sm" onclick="checkNum('p5_2', 13.86, 0.1, 'f5_2')">Check</button>
      </div>
      <div class="feedback" id="f5_2"></div>
    </div>

    <div class="problem">
      <p><strong>P3.</strong> A C-14 sample has activity 1/4 of a fresh sample. How old is it? (t₁/₂ = 5730 yr, in years)</p>
      <div class="problem-row">
        <input type="number" id="p5_3" placeholder="years" step="1">
        <button class="btn sm" onclick="checkNum('p5_3', 11460, 200, 'f5_3')">Check</button>
      </div>
      <div class="feedback" id="f5_3"></div>
    </div>

    <div class="problem">
      <p><strong>P4.</strong> Initial activity A₀ = 2400 Bq, t₁/₂ = 8 min. What is the activity after 24 min? (Bq)</p>
      <div class="problem-row">
        <input type="number" id="p5_4" placeholder="Bq" step="1">
        <button class="btn sm" onclick="checkNum('p5_4', 300, 5, 'f5_4')">Check</button>
      </div>
      <div class="feedback" id="f5_4"></div>
    </div>

    <div class="problem">
      <p><strong>P5.</strong> What fraction of a radioactive sample remains after 4 half-lives?</p>
      <div class="mc-options" id="mc5_5">
        <button class="mc-btn" onclick="checkMC(this,'mc5_5',2,'f5_5')">A) 1/2</button>
        <button class="mc-btn" onclick="checkMC(this,'mc5_5',2,'f5_5')">B) 1/16</button>
        <button class="mc-btn" onclick="checkMC(this,'mc5_5',2,'f5_5')">C) 1/8</button>
        <button class="mc-btn" onclick="checkMC(this,'mc5_5',2,'f5_5')">D) 1/4</button>
      </div>
      <div class="feedback" id="f5_5"></div>
    </div>

  </div>
</div>

<!-- ======== QUIZ ======== -->
<div class="quiz-section" id="quiz-section">
  <h2>Lesson 28 Quiz</h2>
  <div class="subtitle">10 questions — all sections covered</div>

  <div class="quiz-question">
    <div class="q-num">Q1</div>
    <p>The energy of the n=2 level in hydrogen is:</p>
    <div class="mc-options" id="qmc1">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc1',1,2,'qf1')">A) −13.6 eV</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc1',2,2,'qf1')">B) −3.40 eV</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc1',3,2,'qf1')">C) −1.51 eV</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc1',4,2,'qf1')">D) 0 eV</button>
    </div>
    <div class="feedback" id="qf1"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q2</div>
    <p>The Bohr model requires that the angular momentum of an electron orbit is:</p>
    <div class="mc-options" id="qmc2">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc2',1,3,'qf2')">A) Any continuous value</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc2',2,3,'qf2')">B) Zero</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc2',3,3,'qf2')">C) An integer multiple of ℏ</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc2',4,3,'qf2')">D) A multiple of h (not ℏ)</button>
    </div>
    <div class="feedback" id="qf2"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q3</div>
    <p>The Balmer series of hydrogen corresponds to transitions ending at:</p>
    <div class="mc-options" id="qmc3">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc3',1,2,'qf3')">A) n=1</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc3',2,2,'qf3')">B) n=2</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc3',3,2,'qf3')">C) n=3</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc3',4,2,'qf3')">D) n=4</button>
    </div>
    <div class="feedback" id="qf3"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q4</div>
    <p>In ²³⁵₉₂U, the number of neutrons is:</p>
    <div class="mc-options" id="qmc4">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc4',1,3,'qf4')">A) 92</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc4',2,3,'qf4')">B) 235</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc4',3,3,'qf4')">C) 143</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc4',4,3,'qf4')">D) 327</button>
    </div>
    <div class="feedback" id="qf4"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q5</div>
    <p>Which quantity is conserved in all types of nuclear decay?</p>
    <div class="mc-options" id="qmc5">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc5',1,4,'qf5')">A) Atomic number Z only</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc5',2,4,'qf5')">B) Mass number A only</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc5',3,4,'qf5')">C) Kinetic energy only</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc5',4,4,'qf5')">D) Both A and total charge</button>
    </div>
    <div class="feedback" id="qf5"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q6</div>
    <p>In alpha decay, the parent nucleus changes by:</p>
    <div class="mc-options" id="qmc6">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc6',1,3,'qf6')">A) Z−1, A−1</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc6',2,3,'qf6')">B) Z+2, A+4</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc6',3,3,'qf6')">C) Z−2, A−4</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc6',4,3,'qf6')">D) Z+1, A unchanged</button>
    </div>
    <div class="feedback" id="qf6"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q7</div>
    <p>After 3 half-lives, what fraction of the original nuclei remain?</p>
    <div class="mc-options" id="qmc7">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc7',1,2,'qf7')">A) 1/4</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc7',2,2,'qf7')">B) 1/8</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc7',3,2,'qf7')">C) 1/3</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc7',4,2,'qf7')">D) 1/16</button>
    </div>
    <div class="feedback" id="qf7"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q8</div>
    <p>The binding energy per nucleon is highest for which element?</p>
    <div class="mc-options" id="qmc8">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc8',1,2,'qf8')">A) Hydrogen (H-1)</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc8',2,2,'qf8')">B) Iron (Fe-56)</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc8',3,2,'qf8')">C) Uranium (U-238)</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc8',4,2,'qf8')">D) Carbon (C-12)</button>
    </div>
    <div class="feedback" id="qf8"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q9</div>
    <p>A nucleus emits a gamma ray. Its atomic number Z:</p>
    <div class="mc-options" id="qmc9">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc9',1,3,'qf9')">A) Increases by 1</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc9',2,3,'qf9')">B) Decreases by 2</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc9',3,3,'qf9')">C) Stays the same</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc9',4,3,'qf9')">D) Decreases by 1</button>
    </div>
    <div class="feedback" id="qf9"></div>
  </div>

  <div class="quiz-question">
    <div class="q-num">Q10</div>
    <p>The Rydberg formula gives the reciprocal of the wavelength of light emitted in a hydrogen transition. Which variable sets which spectral series?</p>
    <div class="mc-options" id="qmc10">
      <button class="mc-btn" onclick="quizAnswer(this,'qmc10',1,2,'qf10')">A) nᵢ (initial quantum number)</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc10',2,2,'qf10')">B) nf (final quantum number)</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc10',3,2,'qf10')">C) nᵢ − nf (the difference)</button>
      <button class="mc-btn" onclick="quizAnswer(this,'qmc10',4,2,'qf10')">D) The Rydberg constant</button>
    </div>
    <div class="feedback" id="qf10"></div>
  </div>

  <button class="btn" id="submit-quiz" onclick="submitQuiz()">Submit Quiz</button>
  <div class="score-display" id="score-display">
    <div id="score-val"></div>
    <div class="score-label">out of 10 questions correct</div>
  </div>
</div>

</div><!-- end .content -->

<script>
// ─── CONSTANTS ─────────────────────────────────────────────
const h_eV  = 4.136e-15;  // eV·s
const hc_nm = 1240;       // eV·nm
const E_n   = n => -13.6 / (n * n); // eV
const RH    = 1.097e7; // m⁻¹

// ─── SECTION TOGGLE ────────────────────────────────────────
function toggleSection(id) {
  const card = document.getElementById(id);
  card.classList.toggle('open');
}

// ─── PROGRESS ──────────────────────────────────────────────
const totalSections = 5;
function updateProgress() {
  const done = document.querySelectorAll('.section-card.completed').length;
  document.getElementById('progressFill').style.width = (done / totalSections * 100) + '%';
  document.getElementById('progressLabel').textContent = done + ' / ' + totalSections + ' sections';
}

function checkSectionComplete(sectionNum) {
  const card = document.getElementById('sec' + sectionNum);
  const corrects = card.querySelectorAll('.feedback.correct');
  const problems = card.querySelectorAll('.problem');
  if (corrects.length >= problems.length) {
    card.classList.add('completed');
    updateProgress();
  }
}

// ─── CHECK FUNCTIONS ───────────────────────────────────────
function checkNum(inputId, answer, tolerance, feedbackId) {
  const val = parseFloat(document.getElementById(inputId).value);
  const fb  = document.getElementById(feedbackId);
  fb.className = 'feedback';
  void fb.offsetWidth;
  if (isNaN(val)) {
    fb.className = 'feedback incorrect';
    fb.textContent = 'Please enter a number.';
    return;
  }
  if (Math.abs(val - answer) <= tolerance) {
    fb.className = 'feedback correct';
    fb.textContent = 'Correct! ' + getHint(feedbackId, answer);
  } else {
    fb.className = 'feedback incorrect';
    fb.textContent = 'Not quite. Expected ~' + answer + '. Try again.';
  }
  const card = fb.closest('.section-card');
  if (card) checkSectionComplete(card.dataset.section);
}

function getHint(fbId, answer) {
  const hints = {
    f1_1: 'E₃ − E₁ = −1.51 − (−13.6) = 12.09 eV',
    f1_2: 'E₄ − E₁ = −0.85 − (−13.6) = 12.75 eV',
    f1_3: '|E₃| = 13.6/9 = 1.51 eV to ionize from n=3',
    f1_4: 'ΔE = E₄−E₂ = 2.55 eV → λ = 1240/2.55 ≈ 486 nm',
    f2_2: '1/λ = R(1−1/4) = R·3/4 → λ = 4/(3R) ≈ 122 nm',
    f2_3: 'E = 1240/656 ≈ 1.89 eV',
    f2_5: 'f = E/h = 10.2/(4.136e−15) ≈ 2466 THz',
    f3_1: 'N = A−Z = 238−92 = 146',
    f3_2: 'r = 1.2×56^(1/3) = 1.2×3.826 = 4.59 fm',
    f3_3: 'Δm = 2×1.007276 + 2×1.008665 − 4.002602 = 0.0304 u',
    f3_4: 'E = 0.0304 × 931.5 = 28.3 MeV',
    f4_1: 'A−4 = 226−4 = 222',
    f4_2: 'Z−2 = 88−2 = 86 (Radon)',
    f4_3: 'Z+1 = 15+1 = 16 (Sulfur)',
    f4_5: 'Z+1 = 83+1 = 84 (Polonium)',
    f5_1: '30 days = 3 half-lives → 8000/8 = 1000',
    f5_2: 't₁/₂ = ln2/0.050 = 13.86 s',
    f5_3: '2 half-lives → 2 × 5730 = 11460 yr',
    f5_4: '24 min = 3 half-lives → 2400/8 = 300 Bq',
  };
  return hints[fbId] || '';
}

function checkMC(btn, groupId, correctIndex, feedbackId) {
  const group = document.getElementById(groupId);
  const buttons = group.querySelectorAll('.mc-btn');
  buttons.forEach(b => b.classList.remove('selected-correct','selected-incorrect'));
  const idx = Array.from(buttons).indexOf(btn) + 1;
  const fb = document.getElementById(feedbackId);
  fb.className = 'feedback';
  void fb.offsetWidth;
  if (idx === correctIndex) {
    btn.classList.add('selected-correct');
    fb.className = 'feedback correct';
    fb.textContent = 'Correct!';
    buttons.forEach(b => b.style.pointerEvents = 'none');
  } else {
    btn.classList.add('selected-incorrect');
    fb.className = 'feedback incorrect';
    fb.textContent = 'Not quite — try again.';
  }
  const card = fb.closest('.section-card');
  if (card) checkSectionComplete(card.dataset.section);
}

// ─── QUIZ ──────────────────────────────────────────────────
const quizAnswers = {};
const quizCorrect = {};

function quizAnswer(btn, groupId, chosen, correct, feedbackId) {
  const group = document.getElementById(groupId);
  if (quizAnswers[groupId]) return; // already answered
  quizAnswers[groupId] = chosen;
  quizCorrect[groupId] = (chosen === correct);
  const buttons = group.querySelectorAll('.mc-btn');
  buttons.forEach(b => {
    b.style.pointerEvents = 'none';
    b.classList.remove('selected-correct','selected-incorrect');
  });
  const fb = document.getElementById(feedbackId);
  if (chosen === correct) {
    btn.classList.add('selected-correct');
    fb.className = 'feedback correct';
    fb.textContent = 'Correct!';
  } else {
    btn.classList.add('selected-incorrect');
    fb.className = 'feedback incorrect';
    // highlight correct
    buttons[correct-1].classList.add('selected-correct');
    fb.className = 'feedback incorrect';
    fb.textContent = 'Incorrect. The correct answer is highlighted.';
  }
}

function submitQuiz() {
  const score = Object.values(quizCorrect).filter(Boolean).length;
  document.getElementById('score-val').textContent = score + ' / 10';
  const disp = document.getElementById('score-display');
  disp.style.display = 'block';
  disp.style.color = score >= 8 ? 'var(--green)' : score >= 5 ? 'var(--amber)' : 'var(--pink)';
  document.getElementById('submit-quiz').style.display = 'none';
}

// ─── ENERGY LEVEL DIAGRAM ──────────────────────────────────
const levels = [1,2,3,4,5,6];
let selectedNi = null;

function drawEnergyDiagram(fromN, toN, animate) {
  const svg = document.getElementById('energy-svg');
  const W = 560, H = 300;
  const leftPad = 70, rightPad = 40, topPad = 20, botPad = 30;
  const drawH = H - topPad - botPad;

  // Map energy to Y (E=0 at top, E=-13.6 at bottom)
  const Emin = -14.5, Emax = 0.5;
  const Ey = e => topPad + drawH * (Emax - e) / (Emax - Emin);

  const ns = [1,2,3,4,5,6];
  const colors = ['#6366f1','#22c55e','#ec4899','#f59e0b','#38bdf8','#a78bfa'];

  let svgContent = `<rect width="${W}" height="${H}" fill="#16191f" rx="8"/>`;

  // Draw levels
  ns.forEach((n,i) => {
    const e = E_n(n);
    const y = Ey(e);
    const c = colors[i];
    svgContent += `<line x1="${leftPad}" y1="${y}" x2="${W-rightPad}" y2="${y}" stroke="${c}" stroke-width="1.5" opacity="0.7"/>`;
    svgContent += `<text x="6" y="${y+4}" font-size="11" fill="${c}" font-weight="600">n=${n}</text>`;
    svgContent += `<text x="${W-rightPad+6}" y="${y+4}" font-size="10" fill="${c}">${e.toFixed(2)}</text>`;
  });

  // ionization
  const yion = Ey(0);
  svgContent += `<line x1="${leftPad}" y1="${yion}" x2="${W-rightPad}" y2="${yion}" stroke="#555" stroke-width="1" stroke-dasharray="4,3"/>`;
  svgContent += `<text x="6" y="${yion+4}" font-size="10" fill="#666">n=∞</text>`;
  svgContent += `<text x="${W-rightPad+6}" y="${yion+4}" font-size="10" fill="#666">0</text>`;

  // Arrow for transition
  if (fromN && toN && fromN > toN) {
    const yi = Ey(E_n(fromN));
    const yf = Ey(E_n(toN));
    const xA = leftPad + (W - leftPad - rightPad) * 0.5;
    const dE = Math.abs(E_n(fromN) - E_n(toN));
    const wl = hc_nm / dE; // nm
    const arrowColor = wavelengthToHex(wl);

    svgContent += `<defs><marker id="ah" markerWidth="8" markerHeight="8" refX="4" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6 Z" fill="${arrowColor}"/></marker></defs>`;
    svgContent += `<line x1="${xA}" y1="${yi}" x2="${xA}" y2="${yf+10}" stroke="${arrowColor}" stroke-width="3" marker-end="url(#ah)" opacity="0.95"/>`;
    svgContent += `<circle cx="${xA}" cy="${yi}" r="5" fill="${arrowColor}" opacity="0.8"/>`;
  }

  svgContent += `<text x="${leftPad+10}" y="${H-6}" font-size="10" fill="#555">Energy (eV)</text>`;

  svg.innerHTML = svgContent;
}

function wavelengthToHex(nm) {
  if (nm < 100) return '#a78bfa'; // UV
  if (nm < 380) return '#a78bfa'; // UV
  if (nm < 440) return '#7c3aed';
  if (nm < 490) return '#3b82f6';
  if (nm < 510) return '#22c55e';
  if (nm < 580) return '#fde047';
  if (nm < 645) return '#f97316';
  if (nm < 750) return '#ef4444';
  return '#f87171'; // IR
}

function seriesName(nf) {
  const s = {1:'Lyman (UV)',2:'Balmer (visible)',3:'Paschen (IR)',4:'Brackett (IR)'};
  return s[nf] || 'Higher series (IR)';
}

function buildEnergyControls() {
  const ctrl = document.getElementById('energy-controls');
  ctrl.innerHTML = '';
  const lbl = document.createElement('span');
  lbl.style.cssText = 'font-size:12px;color:var(--text-dim);align-self:center;';
  lbl.textContent = 'Start (nᵢ):';
  ctrl.appendChild(lbl);

  [2,3,4,5,6].forEach(n => {
    const b = document.createElement('button');
    b.className = 'btn sm';
    b.textContent = 'n=' + n;
    b.style.background = selectedNi === n ? 'var(--indigo)' : 'var(--bg-card)';
    b.style.border = '1px solid var(--border)';
    b.style.color = 'var(--text)';
    b.onclick = () => { selectedNi = n; buildEnergyControls(); drawEnergyDiagram(null,null,false); updateTransitionInfo(null); };
    ctrl.appendChild(b);
  });

  if (selectedNi) {
    const lbl2 = document.createElement('span');
    lbl2.style.cssText = 'font-size:12px;color:var(--text-dim);align-self:center;margin-left:8px;';
    lbl2.textContent = '→ nf:';
    ctrl.appendChild(lbl2);

    for (let nf = 1; nf < selectedNi; nf++) {
      const bf = document.createElement('button');
      bf.className = 'btn sm';
      const dE = Math.abs(E_n(selectedNi) - E_n(nf));
      const wl = hc_nm / dE;
      bf.style.background = wavelengthToHex(wl);
      bf.style.color = '#111';
      bf.textContent = 'n=' + nf;
      const captured_nf = nf;
      bf.onclick = () => {
        drawEnergyDiagram(selectedNi, captured_nf, true);
        updateTransitionInfo(captured_nf);
      };
      ctrl.appendChild(bf);
    }
  }
}

function updateTransitionInfo(nf) {
  const info = document.getElementById('transition-info');
  if (!nf || !selectedNi) { info.textContent = ''; return; }
  const dE = Math.abs(E_n(selectedNi) - E_n(nf));
  const wl = hc_nm / dE;
  const freq = (dE / h_eV / 1e12).toFixed(0);
  info.innerHTML = `n=${selectedNi} → n=${nf}: &nbsp; ΔE = <strong style="color:var(--amber)">${dE.toFixed(3)} eV</strong> &nbsp; λ = <strong style="color:${wavelengthToHex(wl)}">${wl.toFixed(1)} nm</strong> &nbsp; f ≈ ${freq} THz &nbsp; — <em style="color:var(--text-dim)">${seriesName(nf)}</em>`;
}

// Init energy diagram
drawEnergyDiagram(null, null, false);
buildEnergyControls();

// ─── DECAY SIMULATOR ───────────────────────────────────────
function runDecaySim() {
  const N0  = parseFloat(document.getElementById('sim-N0').value) || 1000;
  const hl  = parseFloat(document.getElementById('sim-hl').value) || 5;
  const nhl = parseInt(document.getElementById('sim-nhl').value) || 6;
  const lam = Math.LN2 / hl;
  const tMax = nhl * hl;

  const svg = document.getElementById('decay-svg');
  const W = 560, H = 180;
  const pad = {t:20, b:30, l:50, r:20};
  const dW = W - pad.l - pad.r, dH = H - pad.t - pad.b;

  const points = [];
  const steps = 120;
  for (let i = 0; i <= steps; i++) {
    const t = tMax * i / steps;
    const N = N0 * Math.exp(-lam * t);
    points.push({t, N});
  }

  const xS = t => pad.l + dW * t / tMax;
  const yS = n => pad.t + dH * (1 - n / N0);

  let path = `M ${xS(0)} ${yS(N0)}`;
  points.forEach(p => { path += ` L ${xS(p.t)} ${yS(p.N)}`; });

  let svgC = `<rect width="${W}" height="${H}" fill="#16191f" rx="8"/>`;

  // Grid lines at each half-life
  for (let i = 0; i <= nhl; i++) {
    const x = xS(i * hl);
    svgC += `<line x1="${x}" y1="${pad.t}" x2="${x}" y2="${H-pad.b}" stroke="#2a2f3a" stroke-width="1"/>`;
    svgC += `<text x="${x}" y="${H-6}" font-size="9" fill="#555" text-anchor="middle">t₁/₂×${i}</text>`;
  }
  // Y grid
  [0,0.25,0.5,0.75,1].forEach(f => {
    const y = yS(N0*f);
    svgC += `<line x1="${pad.l}" y1="${y}" x2="${W-pad.r}" y2="${y}" stroke="#2a2f3a" stroke-width="1"/>`;
    svgC += `<text x="${pad.l-4}" y="${y+4}" font-size="9" fill="#555" text-anchor="end">${Math.round(N0*f)}</text>`;
  });

  // Curve
  svgC += `<path d="${path}" stroke="#22c55e" stroke-width="2.5" fill="none"/>`;
  svgC += `<circle cx="${xS(0)}" cy="${yS(N0)}" r="4" fill="#22c55e"/>`;

  // Half-life markers
  for (let i = 1; i <= nhl; i++) {
    const t = i * hl;
    const N = N0 * Math.pow(0.5, i);
    svgC += `<circle cx="${xS(t)}" cy="${yS(N)}" r="4" fill="#f59e0b"/>`;
  }

  svgC += `<text x="${pad.l+4}" y="${pad.t-4}" font-size="10" fill="#9ca3af">N(t) vs time</text>`;

  svg.innerHTML = svgC;

  // Info
  const actAt0 = (lam * N0).toFixed(1);
  document.getElementById('decay-info').innerHTML =
    `<div class="decay-stat">λ = <span>${lam.toFixed(4)}</span> per unit time</div>` +
    `<div class="decay-stat">A₀ = <span>${actAt0}</span> decays/unit time</div>` +
    `<div class="decay-stat">After ${nhl} half-lives: <span>${(N0 / Math.pow(2,nhl)).toFixed(1)}</span> atoms</div>`;
}

function queryDecay() {
  const N0  = parseFloat(document.getElementById('sim-N0').value) || 1000;
  const hl  = parseFloat(document.getElementById('sim-hl').value) || 5;
  const t   = parseFloat(document.getElementById('sim-qt').value) || 0;
  const lam = Math.LN2 / hl;
  const N   = N0 * Math.exp(-lam * t);
  const A   = lam * N;
  document.getElementById('sim-query-result').textContent =
    `N(${t}) = ${N.toFixed(1)} atoms   |   Activity = ${A.toFixed(2)} decays/unit time`;
}

runDecaySim();

// ─── DECAY CHAIN VISUALIZER ────────────────────────────────
const elementSymbols = [
  '?','H','He','Li','Be','B','C','N','O','F','Ne',
  'Na','Mg','Al','Si','P','S','Cl','Ar','K','Ca',
  'Sc','Ti','V','Cr','Mn','Fe','Co','Ni','Cu','Zn',
  'Ga','Ge','As','Se','Br','Kr','Rb','Sr','Y','Zr',
  'Nb','Mo','Tc','Ru','Rh','Pd','Ag','Cd','In','Sn',
  'Sb','Te','I','Xe','Cs','Ba','La','Ce','Pr','Nd',
  'Pm','Sm','Eu','Gd','Tb','Dy','Ho','Er','Tm','Yb',
  'Lu','Hf','Ta','W','Re','Os','Ir','Pt','Au','Hg',
  'Tl','Pb','Bi','Po','At','Rn','Fr','Ra','Ac','Th',
  'Pa','U','Np','Pu','Am','Cm','Bk','Cf','Es','Fm',
  'Md','No','Lr','Rf','Db','Sg','Bh','Hs','Mt','Ds',
  'Rg','Cn','Nh','Fl','Mc','Lv','Ts','Og'
];

let dcChain = [];

function initDecayChain() {
  const Z = parseInt(document.getElementById('dc-Z').value);
  const A = parseInt(document.getElementById('dc-A').value);
  const sym = document.getElementById('dc-sym').value || elementSymbols[Z] || '?';
  dcChain = [{Z, A, sym}];
  renderDecayChain();
}

function applyDecay(type) {
  if (!dcChain.length) initDecayChain();
  const last = dcChain[dcChain.length - 1];
  let newZ = last.Z, newA = last.A, decayLabel = '';
  if (type === 'alpha')  { newZ -= 2; newA -= 4; decayLabel = 'α'; }
  if (type === 'beta-')  { newZ += 1;             decayLabel = 'β⁻'; }
  if (type === 'beta+')  { newZ -= 1;             decayLabel = 'β⁺'; }
  if (newZ < 1 || newA < 1) return;
  const sym = (newZ < elementSymbols.length) ? elementSymbols[newZ] : '?';
  dcChain.push({Z: newZ, A: newA, sym, label: decayLabel});
  if (dcChain.length > 6) dcChain.shift();
  renderDecayChain();
}

function resetDecayChain() { dcChain = []; initDecayChain(); }

function renderDecayChain() {
  const el = document.getElementById('decay-chain-display');
  el.innerHTML = '';
  dcChain.forEach((n, i) => {
    if (i > 0) {
      const arr = document.createElement('div');
      arr.style.cssText = 'display:flex;flex-direction:column;align-items:center;font-size:11px;color:var(--text-dim);';
      arr.innerHTML = `<span style="font-size:16px;color:var(--amber)">→</span><span style="font-size:10px">${n.label}</span>`;
      el.appendChild(arr);
    }
    const badge = document.createElement('div');
    badge.className = 'nucleus-badge';
    badge.innerHTML = `<div class="mass">${n.A}${n.sym}</div><div class="info">Z=${n.Z} N=${n.A-n.Z}</div>`;
    el.appendChild(badge);
  });
}

initDecayChain();

// ─── BINDING ENERGY CALCULATOR ─────────────────────────────
const beData = [
  {label:'H-1', A:1, BE:0},
  {label:'He-4', A:4, BE:7.07},
  {label:'Li-6', A:6, BE:5.33},
  {label:'C-12', A:12, BE:7.68},
  {label:'N-14', A:14, BE:7.48},
  {label:'O-16', A:16, BE:7.98},
  {label:'Fe-56', A:56, BE:8.79},
  {label:'Ni-62', A:62, BE:8.79},
  {label:'Zr-90', A:90, BE:8.71},
  {label:'Sn-120', A:120, BE:8.51},
  {label:'Pb-208', A:208, BE:7.87},
  {label:'U-235', A:235, BE:7.59},
  {label:'U-238', A:238, BE:7.57},
];

function applyBePreset() {
  const val = document.getElementById('be-preset').value;
  if (!val) return;
  const [Z,A,mass] = val.split(',');
  document.getElementById('be-Z').value = Z;
  document.getElementById('be-A').value = A;
  document.getElementById('be-mass').value = mass;
}

function calcBindingEnergy() {
  const Z = parseFloat(document.getElementById('be-Z').value);
  const A = parseFloat(document.getElementById('be-A').value);
  const M = parseFloat(document.getElementById('be-mass').value);
  const res = document.getElementById('be-result');
  if (!Z || !A || !M) { res.textContent = 'Please fill all fields.'; return; }
  const N = A - Z;
  const mp = 1.007276, mn = 1.008665;
  const dm = Z*mp + N*mn - M;
  const Eb = dm * 931.5; // MeV
  const EbA = Eb / A;
  res.innerHTML = `Mass defect: <strong style="color:var(--indigo)">${dm.toFixed(5)} u</strong> &nbsp; | &nbsp; Binding energy: <strong style="color:var(--green)">${Eb.toFixed(2)} MeV</strong> &nbsp; | &nbsp; Per nucleon: <strong style="color:var(--amber)">${EbA.toFixed(3)} MeV/nucleon</strong>`;
  drawBECurve(A, EbA);
}

function drawBECurve(markerA, markerBE) {
  const svg = document.getElementById('be-svg');
  const W = 560, H = 160;
  const pad = {t:18, b:28, l:44, r:16};
  const dW = W - pad.l - pad.r, dH = H - pad.t - pad.b;
  const Amax = 250, BEmax = 10;

  const xS = A => pad.l + dW * A / Amax;
  const yS = B => pad.t + dH * (1 - B / BEmax);

  let svgC = `<rect width="${W}" height="${H}" fill="#16191f" rx="8"/>`;

  // Grid
  [0,2,4,6,8,10].forEach(v => {
    const y = yS(v);
    svgC += `<line x1="${pad.l}" y1="${y}" x2="${W-pad.r}" y2="${y}" stroke="#2a2f3a" stroke-width="1"/>`;
    svgC += `<text x="${pad.l-4}" y="${y+4}" font-size="9" fill="#555" text-anchor="end">${v}</text>`;
  });
  [0,50,100,150,200,250].forEach(v => {
    const x = xS(v);
    svgC += `<line x1="${x}" y1="${pad.t}" x2="${x}" y2="${H-pad.b}" stroke="#2a2f3a" stroke-width="1"/>`;
    svgC += `<text x="${x}" y="${H-8}" font-size="9" fill="#555" text-anchor="middle">${v}</text>`;
  });

  // Curve from data
  let path = '';
  beData.forEach((d,i) => {
    const x = xS(d.A), y = yS(d.BE);
    path += (i===0 ? `M ${x} ${y}` : ` L ${x} ${y}`);
  });
  svgC += `<path d="${path}" stroke="#6366f1" stroke-width="2" fill="none"/>`;
  beData.forEach(d => {
    svgC += `<circle cx="${xS(d.A)}" cy="${yS(d.BE)}" r="3" fill="#6366f1"/>`;
  });

  // Marker
  if (markerA && markerBE) {
    const mx = xS(markerA), my = yS(markerBE);
    svgC += `<circle cx="${mx}" cy="${my}" r="6" fill="#f59e0b" stroke="#1a1d24" stroke-width="2"/>`;
    svgC += `<text x="${mx+8}" y="${my-6}" font-size="10" fill="#f59e0b">${markerBE.toFixed(2)} MeV/A</text>`;
  }

  svgC += `<text x="${pad.l+4}" y="${pad.t-2}" font-size="9" fill="#9ca3af">Binding Energy per Nucleon (MeV) vs Mass Number A</text>`;

  svg.innerHTML = svgC;
}

drawBECurve(null, null);

// Init progress
updateProgress();
</script>
</body>
</html>
